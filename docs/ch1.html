<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Representing differences in living standards across countries and over time | Representing data</title>
  <meta name="description" content="Examples of representing data with R for undergraduate students in Economics" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Representing differences in living standards across countries and over time | Representing data" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Examples of representing data with R for undergraduate students in Economics" />
  <meta name="github-repo" content="eekostadinov/Refresher" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Representing differences in living standards across countries and over time | Representing data" />
  
  <meta name="twitter:description" content="Examples of representing data with R for undergraduate students in Economics" />
  

<meta name="author" content="Economics Department, University of Warwick" />


<meta name="date" content="2023-09-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="some-basics.html"/>
<link rel="next" href="ch2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Appreciation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#how-to-read-this-book"><i class="fa fa-check"></i><b>0.1</b> How to read this book</a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#how-to-run-the-codes-yourself"><i class="fa fa-check"></i><b>0.1.1</b> How to run the codes yourself</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#additional-resources-on-r"><i class="fa fa-check"></i><b>0.1.2</b> Additional resources on R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="some-basics.html"><a href="some-basics.html"><i class="fa fa-check"></i><b>1</b> Some basics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="some-basics.html"><a href="some-basics.html#data"><i class="fa fa-check"></i><b>1.1</b> Data</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="some-basics.html"><a href="some-basics.html#cross-sectional-time-series-and-panel-data"><i class="fa fa-check"></i><b>1.1.1</b> Cross-sectional, time-series, and panel data</a></li>
<li class="chapter" data-level="1.1.2" data-path="some-basics.html"><a href="some-basics.html#visualizing-the-structure-of-your-data"><i class="fa fa-check"></i><b>1.1.2</b> Visualizing the structure of your data</a></li>
<li class="chapter" data-level="1.1.3" data-path="some-basics.html"><a href="some-basics.html#categorical-and-quantitative-variables"><i class="fa fa-check"></i><b>1.1.3</b> Categorical and quantitative variables</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="some-basics.html"><a href="some-basics.html#a-note-on-r-packages"><i class="fa fa-check"></i><b>1.2</b> A note on R packages</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch1.html"><a href="ch1.html"><i class="fa fa-check"></i><b>2</b> Representing differences in living standards across countries and over time</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ch1.html"><a href="ch1.html#representing-cross-sectional-data-cross-country-differences-in-living-standards-in-2019"><i class="fa fa-check"></i><b>2.1</b> Representing cross sectional data: Cross-country differences in living standards in 2019</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="ch1.html"><a href="ch1.html#loading-data"><i class="fa fa-check"></i><b>2.1.1</b> Loading data</a></li>
<li class="chapter" data-level="2.1.2" data-path="ch1.html"><a href="ch1.html#summary-of-key-variables"><i class="fa fa-check"></i><b>2.1.2</b> Summary of key variables</a></li>
<li class="chapter" data-level="2.1.3" data-path="ch1.html"><a href="ch1.html#maps-for-fun"><i class="fa fa-check"></i><b>2.1.3</b> Maps (for fun)</a></li>
<li class="chapter" data-level="2.1.4" data-path="ch1.html"><a href="ch1.html#histograms"><i class="fa fa-check"></i><b>2.1.4</b> Histograms</a></li>
<li class="chapter" data-level="2.1.5" data-path="ch1.html"><a href="ch1.html#quantiles"><i class="fa fa-check"></i><b>2.1.5</b> Quantiles</a></li>
<li class="chapter" data-level="2.1.6" data-path="ch1.html"><a href="ch1.html#quantile-function"><i class="fa fa-check"></i><b>2.1.6</b> Quantile function</a></li>
<li class="chapter" data-level="2.1.7" data-path="ch1.html"><a href="ch1.html#visualizing-distribution-within-and-between-regions"><i class="fa fa-check"></i><b>2.1.7</b> Visualizing distribution within and between regions</a></li>
<li class="chapter" data-level="2.1.8" data-path="ch1.html"><a href="ch1.html#representing-relationships-between-continuous-variables"><i class="fa fa-check"></i><b>2.1.8</b> Representing relationships between continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="ch1.html"><a href="ch1.html#representing-time-series-data-real-gdp-per-capita-in-uk-over-time"><i class="fa fa-check"></i><b>2.2</b> Representing time-series data: Real GDP per capita in UK over time</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="ch1.html"><a href="ch1.html#time-series-line-plots"><i class="fa fa-check"></i><b>2.2.1</b> Time-series line plots</a></li>
<li class="chapter" data-level="2.2.2" data-path="ch1.html"><a href="ch1.html#time-series-line-plots-of-the-log-transformation"><i class="fa fa-check"></i><b>2.2.2</b> Time-series line plots of the log transformation</a></li>
<li class="chapter" data-level="2.2.3" data-path="ch1.html"><a href="ch1.html#recessions"><i class="fa fa-check"></i><b>2.2.3</b> Recessions</a></li>
<li class="chapter" data-level="2.2.4" data-path="ch1.html"><a href="ch1.html#growth-rates"><i class="fa fa-check"></i><b>2.2.4</b> Growth rates</a></li>
<li class="chapter" data-level="2.2.5" data-path="ch1.html"><a href="ch1.html#distributions-again"><i class="fa fa-check"></i><b>2.2.5</b> Distributions again</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="ch1.html"><a href="ch1.html#representing-panel-data-cross-country-differences-in-living-standards-over-time---convergence-and-divergence"><i class="fa fa-check"></i><b>2.3</b> Representing panel data: Cross-country differences in living standards over time - convergence and divergence</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ch2.html"><a href="ch2.html"><i class="fa fa-check"></i><b>3</b> Representing climate change</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ch2.html"><a href="ch2.html#global-trends"><i class="fa fa-check"></i><b>3.1</b> Global trends</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="ch2.html"><a href="ch2.html#monthly-global-surface-temperature"><i class="fa fa-check"></i><b>3.1.1</b> Monthly global surface temperature</a></li>
<li class="chapter" data-level="3.1.2" data-path="ch2.html"><a href="ch2.html#changes-in-ice-mass"><i class="fa fa-check"></i><b>3.1.2</b> Changes in ice mass</a></li>
<li class="chapter" data-level="3.1.3" data-path="ch2.html"><a href="ch2.html#sea-level"><i class="fa fa-check"></i><b>3.1.3</b> Sea level</a></li>
<li class="chapter" data-level="3.1.4" data-path="ch2.html"><a href="ch2.html#co2-concentration"><i class="fa fa-check"></i><b>3.1.4</b> CO2 concentration</a></li>
<li class="chapter" data-level="3.1.5" data-path="ch2.html"><a href="ch2.html#co2-emissions"><i class="fa fa-check"></i><b>3.1.5</b> CO2 emissions</a></li>
<li class="chapter" data-level="3.1.6" data-path="ch2.html"><a href="ch2.html#co2-emissions-and-gni-per-capita"><i class="fa fa-check"></i><b>3.1.6</b> CO2 emissions and GNI per capita</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="ch2.html"><a href="ch2.html#uk-trends"><i class="fa fa-check"></i><b>3.2</b> UK trends</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="ch2.html"><a href="ch2.html#uk-temperatures"><i class="fa fa-check"></i><b>3.2.1</b> UK temperatures</a></li>
<li class="chapter" data-level="3.2.2" data-path="ch2.html"><a href="ch2.html#uk-rainfall"><i class="fa fa-check"></i><b>3.2.2</b> UK Rainfall</a></li>
<li class="chapter" data-level="3.2.3" data-path="ch2.html"><a href="ch2.html#uk-co2-emissions"><i class="fa fa-check"></i><b>3.2.3</b> UK CO2 emissions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ch3.html"><a href="ch3.html"><i class="fa fa-check"></i><b>4</b> Representing income inequality</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ch3.html"><a href="ch3.html#distribution-of-income-in-the-frs-201617"><i class="fa fa-check"></i><b>4.1</b> Distribution of income in the FRS 2016/17</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="ch3.html"><a href="ch3.html#summary-of-data"><i class="fa fa-check"></i><b>4.1.1</b> Summary of data</a></li>
<li class="chapter" data-level="4.1.2" data-path="ch3.html"><a href="ch3.html#distribution-of-income-dispersion-and-skewness"><i class="fa fa-check"></i><b>4.1.2</b> Distribution of income: dispersion and skewness</a></li>
<li class="chapter" data-level="4.1.3" data-path="ch3.html"><a href="ch3.html#income-differences-between-and-within-groups-of-individuals"><i class="fa fa-check"></i><b>4.1.3</b> Income differences between and within groups of individuals</a></li>
<li class="chapter" data-level="4.1.4" data-path="ch3.html"><a href="ch3.html#quantitative-measures-of-income-inequality"><i class="fa fa-check"></i><b>4.1.4</b> Quantitative measures of income inequality</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="ch3.html"><a href="ch3.html#cross-country-differences-in-income-inequality"><i class="fa fa-check"></i><b>4.2</b> Cross-country differences in income inequality</a></li>
<li class="chapter" data-level="4.3" data-path="ch3.html"><a href="ch3.html#income-inequality-over-time"><i class="fa fa-check"></i><b>4.3</b> Income inequality over time</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Representing data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ch1" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Representing differences in living standards across countries and over time<a href="ch1.html#ch1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Most of this chapter uses data on GNI per capita (PPP)<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> from the World Bank’s World Development Indicators (WDI) database <span class="citation">(<a href="#ref-wdi">World Bank, 2023</a>)</span> available <a href="https://databank.worldbank.org/source/world-development-indicators">here</a>. The main dataset used includes observations on annual GNI per capita (PPP) for 212 countries from 1973 to 2022. The chapter provides examples of using the data to represent differences in living standards between countries and over time.</p>
<p>For ease of replication, all the data used in the chapter is available as an Excel file <code>data_ch1.xlsx</code> with different datasets saved as different tabs.</p>
<ul>
<li>You can replicate all analysis in the cloud <a href="https://mybinder.org/v2/gh/eekostadinov/Refresher/notebooks">here</a>.</li>
<li>Alternatively, to replicate the chapter in your own R installation, download the data file and corrsponding R-script from <a href="https://github.com/eekostadinov/Refresher/tree/data-and-rscripts">here</a> and extract them inside a folder on your computer. Then set the working directory in R to the folder where the files are. For me, this is the following folder:</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="ch1.html#cb20-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/home/emil/Desktop/book&quot;</span>)</span></code></pre></div>
<p>In addition, run the following code to install all the R packages that will be used for the analysis:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="ch1.html#cb21-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</span>
<span id="cb21-2"><a href="ch1.html#cb21-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyr&quot;</span>)</span>
<span id="cb21-3"><a href="ch1.html#cb21-3" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb21-4"><a href="ch1.html#cb21-4" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb21-5"><a href="ch1.html#cb21-5" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;forcats&quot;</span>)</span>
<span id="cb21-6"><a href="ch1.html#cb21-6" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;stringr&quot;</span>)</span>
<span id="cb21-7"><a href="ch1.html#cb21-7" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;maps&quot;</span>)</span>
<span id="cb21-8"><a href="ch1.html#cb21-8" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;knitr&quot;</span>)</span></code></pre></div>
<p>and load them</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="ch1.html#cb22-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb22-2"><a href="ch1.html#cb22-2" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb22-3"><a href="ch1.html#cb22-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb22-4"><a href="ch1.html#cb22-4" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb22-5"><a href="ch1.html#cb22-5" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb22-6"><a href="ch1.html#cb22-6" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb22-7"><a href="ch1.html#cb22-7" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb22-8"><a href="ch1.html#cb22-8" tabindex="-1"></a><span class="fu">library</span>(knitr)</span></code></pre></div>
<p>The complete dataset on GNI per capita (PPP) from WDI is available in the <code>gnipcppp_long</code> sheet of the <code>data_ch1.xlsx</code> Excel file. First, we load and inspect the the first few rows of the data</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="ch1.html#cb23-1" tabindex="-1"></a><span class="co"># Load full panel dataset in long form</span></span>
<span id="cb23-2"><a href="ch1.html#cb23-2" tabindex="-1"></a>longdata <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data_ch1.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;gnipcppp_long&quot;</span>)</span>
<span id="cb23-3"><a href="ch1.html#cb23-3" tabindex="-1"></a><span class="fu">head</span>(longdata)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Code"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["rGNIpc"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1973","5":"NA"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1974","5":"NA"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1975","5":"NA"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1976","5":"NA"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1977","5":"NA"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1978","5":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>This is a panel dataset in long form, with each row identifying an individual country in a specific year. There are 10600 observations (country-year pairs) in total (212 countries followed over 50 years).</p>
<p>In the remainder of this chapter, we will illustrate how individual cross sections, individual time series, or the whole panel dataset can be utilized to insightfully represent information from the data.</p>
<p>The following code cleans the R environment so that the dataframes used in this section are no longer loaded:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="ch1.html#cb24-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
<div id="representing-cross-sectional-data-cross-country-differences-in-living-standards-in-2019" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Representing cross sectional data: Cross-country differences in living standards in 2019<a href="ch1.html#representing-cross-sectional-data-cross-country-differences-in-living-standards-in-2019" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section uses a cross section of the panel dataset for 2019 only, and presents examples of insightful ways of representing this data, with view of understanding differences in (distribution of) living standards as measured by GNI per capita (PPP), across countries in 2019.</p>
<div id="loading-data" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Loading data<a href="ch1.html#loading-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First, to obtain cross-sectional data for 2019, we can load the full panel dataset in long form (found in the third sheet of the <code>data_ch1.xlsx</code> Excel file) and then only keep observations for 2019.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="ch1.html#cb25-1" tabindex="-1"></a><span class="co"># Load full panel dataset in long form</span></span>
<span id="cb25-2"><a href="ch1.html#cb25-2" tabindex="-1"></a>longdata <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data_ch1.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;gnipcppp_long&quot;</span>)</span>
<span id="cb25-3"><a href="ch1.html#cb25-3" tabindex="-1"></a></span>
<span id="cb25-4"><a href="ch1.html#cb25-4" tabindex="-1"></a><span class="co"># Obtain a cross-section for Year 2019 only, and allocate to dataframe `csdata`</span></span>
<span id="cb25-5"><a href="ch1.html#cb25-5" tabindex="-1"></a></span>
<span id="cb25-6"><a href="ch1.html#cb25-6" tabindex="-1"></a>csdata <span class="ot">&lt;-</span> <span class="fu">subset</span>(longdata, Year<span class="sc">==</span><span class="dv">2019</span>)</span>
<span id="cb25-7"><a href="ch1.html#cb25-7" tabindex="-1"></a></span>
<span id="cb25-8"><a href="ch1.html#cb25-8" tabindex="-1"></a><span class="co"># Prepare by declaring `Country`, `Code` and `Region` to be factor (or categorical) variables</span></span>
<span id="cb25-9"><a href="ch1.html#cb25-9" tabindex="-1"></a></span>
<span id="cb25-10"><a href="ch1.html#cb25-10" tabindex="-1"></a>csdata<span class="sc">$</span>Code <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(csdata<span class="sc">$</span>Code)</span>
<span id="cb25-11"><a href="ch1.html#cb25-11" tabindex="-1"></a>csdata<span class="sc">$</span>Region <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(csdata<span class="sc">$</span>Region)</span>
<span id="cb25-12"><a href="ch1.html#cb25-12" tabindex="-1"></a>csdata<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(csdata<span class="sc">$</span>Country)</span>
<span id="cb25-13"><a href="ch1.html#cb25-13" tabindex="-1"></a></span>
<span id="cb25-14"><a href="ch1.html#cb25-14" tabindex="-1"></a><span class="co"># Remove full panel dataset from memory</span></span>
<span id="cb25-15"><a href="ch1.html#cb25-15" tabindex="-1"></a><span class="fu">rm</span>(longdata)</span></code></pre></div>
<p>For completeness, the full cross sectional dataset we work with is presented in the following table</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="ch1.html#cb26-1" tabindex="-1"></a>csdata <span class="ot">&lt;-</span> csdata <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(rGNIpc))</span>
<span id="cb26-2"><a href="ch1.html#cb26-2" tabindex="-1"></a></span>
<span id="cb26-3"><a href="ch1.html#cb26-3" tabindex="-1"></a>csdata</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Code"],"name":[2],"type":["fct"],"align":["left"]},{"label":["Region"],"name":[3],"type":["fct"],"align":["left"]},{"label":["Year"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["rGNIpc"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Bermuda","2":"BMU","3":"North America","4":"2019","5":"117280"},{"1":"Isle of Man","2":"IMN","3":"Europe and Central Asia","4":"2019","5":"84490"},{"1":"Switzerland","2":"CHE","3":"Europe and Central Asia","4":"2019","5":"83160"},{"1":"Norway","2":"NOR","3":"Europe and Central Asia","4":"2019","5":"82430"},{"1":"Luxembourg","2":"LUX","3":"Europe and Central Asia","4":"2019","5":"77500"},{"1":"Iceland","2":"ISL","3":"Europe and Central Asia","4":"2019","5":"72980"},{"1":"Faroe Islands","2":"FRO","3":"Europe and Central Asia","4":"2019","5":"66380"},{"1":"USA","2":"USA","3":"North America","4":"2019","5":"66130"},{"1":"Cayman Islands","2":"CYM","3":"Latin America and Caribbean","4":"2019","5":"65690"},{"1":"Ireland","2":"IRL","3":"Europe and Central Asia","4":"2019","5":"63570"},{"1":"Denmark","2":"DNK","3":"Europe and Central Asia","4":"2019","5":"63140"},{"1":"Qatar","2":"QAT","3":"Middle East and North Africa","4":"2019","5":"61790"},{"1":"Singapore","2":"SGP","3":"East Asia and Pacific","4":"2019","5":"58910"},{"1":"Sweden","2":"SWE","3":"Europe and Central Asia","4":"2019","5":"56470"},{"1":"Australia","2":"AUS","3":"East Asia and Pacific","4":"2019","5":"54900"},{"1":"Netherlands","2":"NLD","3":"Europe and Central Asia","4":"2019","5":"51930"},{"1":"Austria","2":"AUT","3":"Europe and Central Asia","4":"2019","5":"51020"},{"1":"Finland","2":"FIN","3":"Europe and Central Asia","4":"2019","5":"49940"},{"1":"Germany","2":"DEU","3":"Europe and Central Asia","4":"2019","5":"49220"},{"1":"Belgium","2":"BEL","3":"Europe and Central Asia","4":"2019","5":"48110"},{"1":"Canada","2":"CAN","3":"North America","4":"2019","5":"46600"},{"1":"Andorra","2":"AND","3":"Europe and Central Asia","4":"2019","5":"46530"},{"1":"United Arab Emirates","2":"ARE","3":"Middle East and North Africa","4":"2019","5":"46210"},{"1":"San Marino","2":"SMR","3":"Europe and Central Asia","4":"2019","5":"44390"},{"1":"Israel","2":"ISR","3":"Middle East and North Africa","4":"2019","5":"44070"},{"1":"UK","2":"GBR","3":"Europe and Central Asia","4":"2019","5":"43380"},{"1":"New Zealand","2":"NZL","3":"East Asia and Pacific","4":"2019","5":"43110"},{"1":"France","2":"FRA","3":"Europe and Central Asia","4":"2019","5":"42460"},{"1":"Japan","2":"JPN","3":"East Asia and Pacific","4":"2019","5":"41970"},{"1":"Italy","2":"ITA","3":"Europe and Central Asia","4":"2019","5":"34930"},{"1":"Kuwait","2":"KWT","3":"Middle East and North Africa","4":"2019","5":"34490"},{"1":"South Korea","2":"KOR","3":"East Asia and Pacific","4":"2019","5":"33830"},{"1":"Brunei","2":"BRN","3":"East Asia and Pacific","4":"2019","5":"31880"},{"1":"Sint Maarten","2":"SXM","3":"Latin America and Caribbean","4":"2019","5":"31030"},{"1":"Spain","2":"ESP","3":"Europe and Central Asia","4":"2019","5":"30360"},{"1":"Bahamas","2":"BHS","3":"Latin America and Caribbean","4":"2019","5":"30350"},{"1":"Aruba","2":"ABW","3":"Latin America and Caribbean","4":"2019","5":"30330"},{"1":"Malta","2":"MLT","3":"Middle East and North Africa","4":"2019","5":"29370"},{"1":"Cyprus","2":"CYP","3":"Europe and Central Asia","4":"2019","5":"28560"},{"1":"Turks and Caicos Islands","2":"TCA","3":"Latin America and Caribbean","4":"2019","5":"26960"},{"1":"Slovenia","2":"SVN","3":"Europe and Central Asia","4":"2019","5":"26040"},{"1":"Bahrain","2":"BHR","3":"Middle East and North Africa","4":"2019","5":"24420"},{"1":"Saint Kitts","2":"KNA","3":"Latin America and Caribbean","4":"2019","5":"23340"},{"1":"Portugal","2":"PRT","3":"Europe and Central Asia","4":"2019","5":"23200"},{"1":"Saudi Arabia","2":"SAU","3":"Middle East and North Africa","4":"2019","5":"23180"},{"1":"Estonia","2":"EST","3":"Europe and Central Asia","4":"2019","5":"23010"},{"1":"Czech Republic","2":"CZE","3":"Europe and Central Asia","4":"2019","5":"22120"},{"1":"Puerto Rico","2":"PRI","3":"Latin America and Caribbean","4":"2019","5":"22040"},{"1":"Curacao","2":"CUW","3":"Latin America and Caribbean","4":"2019","5":"19700"},{"1":"Greece","2":"GRC","3":"Europe and Central Asia","4":"2019","5":"19690"},{"1":"Slovakia","2":"SVK","3":"Europe and Central Asia","4":"2019","5":"19200"},{"1":"Lithuania","2":"LTU","3":"Europe and Central Asia","4":"2019","5":"19080"},{"1":"Uruguay","2":"URY","3":"Latin America and Caribbean","4":"2019","5":"18170"},{"1":"Latvia","2":"LVA","3":"Europe and Central Asia","4":"2019","5":"17830"},{"1":"Oman","2":"OMN","3":"Middle East and North Africa","4":"2019","5":"17810"},{"1":"Barbados","2":"BRB","3":"Latin America and Caribbean","4":"2019","5":"17630"},{"1":"Antigua","2":"ATG","3":"Latin America and Caribbean","4":"2019","5":"17480"},{"1":"Palau","2":"PLW","3":"East Asia and Pacific","4":"2019","5":"17150"},{"1":"Hungary","2":"HUN","3":"Europe and Central Asia","4":"2019","5":"16570"},{"1":"Seychelles","2":"SYC","3":"Sub-Saharan Africa","4":"2019","5":"16140"},{"1":"Trinidad","2":"TTO","3":"Latin America and Caribbean","4":"2019","5":"15620"},{"1":"Nauru","2":"NRU","3":"East Asia and Pacific","4":"2019","5":"15550"},{"1":"Panama","2":"PAN","3":"Latin America and Caribbean","4":"2019","5":"15470"},{"1":"Croatia","2":"HRV","3":"Europe and Central Asia","4":"2019","5":"15380"},{"1":"Poland","2":"POL","3":"Europe and Central Asia","4":"2019","5":"15330"},{"1":"Chile","2":"CHL","3":"Latin America and Caribbean","4":"2019","5":"14830"},{"1":"Romania","2":"ROU","3":"Europe and Central Asia","4":"2019","5":"12670"},{"1":"Mauritius","2":"MUS","3":"Sub-Saharan Africa","4":"2019","5":"12130"},{"1":"Costa Rica","2":"CRI","3":"Latin America and Caribbean","4":"2019","5":"12040"},{"1":"Russia","2":"RUS","3":"Europe and Central Asia","4":"2019","5":"11280"},{"1":"Argentina","2":"ARG","3":"Latin America and Caribbean","4":"2019","5":"11220"},{"1":"Saint Lucia","2":"LCA","3":"Latin America and Caribbean","4":"2019","5":"11040"},{"1":"Malaysia","2":"MYS","3":"East Asia and Pacific","4":"2019","5":"10960"},{"1":"Libya","2":"LBY","3":"Middle East and North Africa","4":"2019","5":"10680"},{"1":"China","2":"CHN","3":"East Asia and Pacific","4":"2019","5":"10310"},{"1":"Maldives","2":"MDV","3":"South Asia","4":"2019","5":"10160"},{"1":"Turkey","2":"TUR","3":"Europe and Central Asia","4":"2019","5":"9690"},{"1":"Mexico","2":"MEX","3":"Latin America and Caribbean","4":"2019","5":"9660"},{"1":"Bulgaria","2":"BGR","3":"Europe and Central Asia","4":"2019","5":"9510"},{"1":"Brazil","2":"BRA","3":"Latin America and Caribbean","4":"2019","5":"9220"},{"1":"Montenegro","2":"MNE","3":"Europe and Central Asia","4":"2019","5":"9140"},{"1":"Cuba","2":"CUB","3":"Latin America and Caribbean","4":"2019","5":"8920"},{"1":"Grenada","2":"GRD","3":"Latin America and Caribbean","4":"2019","5":"8920"},{"1":"Kazakhstan","2":"KAZ","3":"Europe and Central Asia","4":"2019","5":"8820"},{"1":"Lebanon","2":"LBN","3":"Middle East and North Africa","4":"2019","5":"8650"},{"1":"Saint Vincent","2":"VCT","3":"Latin America and Caribbean","4":"2019","5":"8640"},{"1":"Dominica","2":"DMA","3":"Latin America and Caribbean","4":"2019","5":"8240"},{"1":"Dominican Republic","2":"DOM","3":"Latin America and Caribbean","4":"2019","5":"7990"},{"1":"Thailand","2":"THA","3":"East Asia and Pacific","4":"2019","5":"7080"},{"1":"Turkmenistan","2":"TKM","3":"Europe and Central Asia","4":"2019","5":"7080"},{"1":"Serbia","2":"SRB","3":"Europe and Central Asia","4":"2019","5":"7040"},{"1":"Gabon","2":"GAB","3":"Sub-Saharan Africa","4":"2019","5":"6950"},{"1":"Peru","2":"PER","3":"Latin America and Caribbean","4":"2019","5":"6770"},{"1":"Marshall Islands","2":"MHL","3":"East Asia and Pacific","4":"2019","5":"6750"},{"1":"South Africa","2":"ZAF","3":"Sub-Saharan Africa","4":"2019","5":"6730"},{"1":"Botswana","2":"BWA","3":"Sub-Saharan Africa","4":"2019","5":"6630"},{"1":"Colombia","2":"COL","3":"Latin America and Caribbean","4":"2019","5":"6590"},{"1":"Guyana","2":"GUY","3":"Latin America and Caribbean","4":"2019","5":"6500"},{"1":"Belarus","2":"BLR","3":"Europe and Central Asia","4":"2019","5":"6370"},{"1":"Bosnia and Herzegovina","2":"BIH","3":"Europe and Central Asia","4":"2019","5":"6160"},{"1":"Ecuador","2":"ECU","3":"Latin America and Caribbean","4":"2019","5":"6100"},{"1":"Suriname","2":"SUR","3":"Latin America and Caribbean","4":"2019","5":"6020"},{"1":"Paraguay","2":"PRY","3":"Latin America and Caribbean","4":"2019","5":"5940"},{"1":"Belize","2":"BLZ","3":"Latin America and Caribbean","4":"2019","5":"5890"},{"1":"North Macedonia","2":"MKD","3":"Europe and Central Asia","4":"2019","5":"5890"},{"1":"Fiji","2":"FJI","3":"East Asia and Pacific","4":"2019","5":"5610"},{"1":"Equatorial Guinea","2":"GNQ","3":"Sub-Saharan Africa","4":"2019","5":"5520"},{"1":"Jamaica","2":"JAM","3":"Latin America and Caribbean","4":"2019","5":"5500"},{"1":"Iraq","2":"IRQ","3":"Middle East and North Africa","4":"2019","5":"5470"},{"1":"Namibia","2":"NAM","3":"Sub-Saharan Africa","4":"2019","5":"5270"},{"1":"Albania","2":"ALB","3":"Europe and Central Asia","4":"2019","5":"5230"},{"1":"Tonga","2":"TON","3":"East Asia and Pacific","4":"2019","5":"5130"},{"1":"Armenia","2":"ARM","3":"Europe and Central Asia","4":"2019","5":"4880"},{"1":"Georgia","2":"GEO","3":"Europe and Central Asia","4":"2019","5":"4690"},{"1":"Kosovo","2":"XKX","3":"Europe and Central Asia","4":"2019","5":"4640"},{"1":"Guatemala","2":"GTM","3":"Latin America and Caribbean","4":"2019","5":"4620"},{"1":"Azerbaijan","2":"AZE","3":"Europe and Central Asia","4":"2019","5":"4510"},{"1":"Moldova","2":"MDA","3":"Europe and Central Asia","4":"2019","5":"4490"},{"1":"Palestine","2":"PSE","3":"Middle East and North Africa","4":"2019","5":"4270"},{"1":"Samoa","2":"WSM","3":"East Asia and Pacific","4":"2019","5":"4230"},{"1":"Sri Lanka","2":"LKA","3":"South Asia","4":"2019","5":"4220"},{"1":"Jordan","2":"JOR","3":"Middle East and North Africa","4":"2019","5":"4180"},{"1":"El Salvador","2":"SLV","3":"Latin America and Caribbean","4":"2019","5":"4090"},{"1":"Indonesia","2":"IDN","3":"East Asia and Pacific","4":"2019","5":"4070"},{"1":"Algeria","2":"DZA","3":"Middle East and North Africa","4":"2019","5":"4050"},{"1":"Micronesia","2":"FSM","3":"East Asia and Pacific","4":"2019","5":"4030"},{"1":"Iran","2":"IRN","3":"Middle East and North Africa","4":"2019","5":"4000"},{"1":"Cape Verde","2":"CPV","3":"Sub-Saharan Africa","4":"2019","5":"3960"},{"1":"Mongolia","2":"MNG","3":"East Asia and Pacific","4":"2019","5":"3840"},{"1":"Philippines","2":"PHL","3":"East Asia and Pacific","4":"2019","5":"3770"},{"1":"Swaziland","2":"SWZ","3":"Sub-Saharan Africa","4":"2019","5":"3640"},{"1":"Vanuatu","2":"VUT","3":"East Asia and Pacific","4":"2019","5":"3590"},{"1":"Tunisia","2":"TUN","3":"Middle East and North Africa","4":"2019","5":"3540"},{"1":"Morocco","2":"MAR","3":"Middle East and North Africa","4":"2019","5":"3500"},{"1":"Bolivia","2":"BOL","3":"Latin America and Caribbean","4":"2019","5":"3440"},{"1":"Vietnam","2":"VNM","3":"East Asia and Pacific","4":"2019","5":"3340"},{"1":"Ukraine","2":"UKR","3":"Europe and Central Asia","4":"2019","5":"3310"},{"1":"Kiribati","2":"KIR","3":"East Asia and Pacific","4":"2019","5":"3230"},{"1":"Bhutan","2":"BTN","3":"South Asia","4":"2019","5":"3130"},{"1":"Djibouti","2":"DJI","3":"Middle East and North Africa","4":"2019","5":"2820"},{"1":"Egypt","2":"EGY","3":"Middle East and North Africa","4":"2019","5":"2690"},{"1":"Laos","2":"LAO","3":"East Asia and Pacific","4":"2019","5":"2520"},{"1":"Papua New Guinea","2":"PNG","3":"East Asia and Pacific","4":"2019","5":"2510"},{"1":"Solomon Islands","2":"SLB","3":"East Asia and Pacific","4":"2019","5":"2390"},{"1":"Honduras","2":"HND","3":"Latin America and Caribbean","4":"2019","5":"2330"},{"1":"Ivory Coast","2":"CIV","3":"Sub-Saharan Africa","4":"2019","5":"2280"},{"1":"Bangladesh","2":"BGD","3":"South Asia","4":"2019","5":"2210"},{"1":"Ghana","2":"GHA","3":"Sub-Saharan Africa","4":"2019","5":"2150"},{"1":"Timor-Leste","2":"TLS","3":"East Asia and Pacific","4":"2019","5":"2110"},{"1":"India","2":"IND","3":"South Asia","4":"2019","5":"2080"},{"1":"Nigeria","2":"NGA","3":"Sub-Saharan Africa","4":"2019","5":"2080"},{"1":"Angola","2":"AGO","3":"Sub-Saharan Africa","4":"2019","5":"2040"},{"1":"Republic of Congo","2":"COG","3":"Sub-Saharan Africa","4":"2019","5":"1980"},{"1":"Sao Tome and Principe","2":"STP","3":"Sub-Saharan Africa","4":"2019","5":"1960"},{"1":"Kenya","2":"KEN","3":"Sub-Saharan Africa","4":"2019","5":"1890"},{"1":"Nicaragua","2":"NIC","3":"Latin America and Caribbean","4":"2019","5":"1880"},{"1":"Uzbekistan","2":"UZB","3":"Europe and Central Asia","4":"2019","5":"1880"},{"1":"Mauritania","2":"MRT","3":"Sub-Saharan Africa","4":"2019","5":"1790"},{"1":"Pakistan","2":"PAK","3":"South Asia","4":"2019","5":"1570"},{"1":"Cambodia","2":"KHM","3":"East Asia and Pacific","4":"2019","5":"1560"},{"1":"Cameroon","2":"CMR","3":"Sub-Saharan Africa","4":"2019","5":"1540"},{"1":"Comoros","2":"COM","3":"Sub-Saharan Africa","4":"2019","5":"1520"},{"1":"Senegal","2":"SEN","3":"Sub-Saharan Africa","4":"2019","5":"1460"},{"1":"Zimbabwe","2":"ZWE","3":"Sub-Saharan Africa","4":"2019","5":"1450"},{"1":"Haiti","2":"HTI","3":"Latin America and Caribbean","4":"2019","5":"1410"},{"1":"Zambia","2":"ZMB","3":"Sub-Saharan Africa","4":"2019","5":"1390"},{"1":"Myanmar","2":"MMR","3":"East Asia and Pacific","4":"2019","5":"1300"},{"1":"Lesotho","2":"LSO","3":"Sub-Saharan Africa","4":"2019","5":"1250"},{"1":"Kyrgyzstan","2":"KGZ","3":"Europe and Central Asia","4":"2019","5":"1240"},{"1":"Nepal","2":"NPL","3":"South Asia","4":"2019","5":"1220"},{"1":"Benin","2":"BEN","3":"Sub-Saharan Africa","4":"2019","5":"1200"},{"1":"Tajikistan","2":"TJK","3":"Europe and Central Asia","4":"2019","5":"1070"},{"1":"Tanzania","2":"TZA","3":"Sub-Saharan Africa","4":"2019","5":"1040"},{"1":"Syria","2":"SYR","3":"Middle East and North Africa","4":"2019","5":"980"},{"1":"Guinea","2":"GIN","3":"Sub-Saharan Africa","4":"2019","5":"940"},{"1":"Sudan","2":"SDN","3":"Sub-Saharan Africa","4":"2019","5":"940"},{"1":"Togo","2":"TGO","3":"Sub-Saharan Africa","4":"2019","5":"880"},{"1":"Ethiopia","2":"ETH","3":"Sub-Saharan Africa","4":"2019","5":"830"},{"1":"Mali","2":"MLI","3":"Sub-Saharan Africa","4":"2019","5":"820"},{"1":"Rwanda","2":"RWA","3":"Sub-Saharan Africa","4":"2019","5":"810"},{"1":"Uganda","2":"UGA","3":"Sub-Saharan Africa","4":"2019","5":"810"},{"1":"Guinea-Bissau","2":"GNB","3":"Sub-Saharan Africa","4":"2019","5":"780"},{"1":"Burkina Faso","2":"BFA","3":"Sub-Saharan Africa","4":"2019","5":"750"},{"1":"Gambia","2":"GMB","3":"Sub-Saharan Africa","4":"2019","5":"700"},{"1":"Chad","2":"TCD","3":"Sub-Saharan Africa","4":"2019","5":"690"},{"1":"Liberia","2":"LBR","3":"Sub-Saharan Africa","4":"2019","5":"610"},{"1":"Niger","2":"NER","3":"Sub-Saharan Africa","4":"2019","5":"590"},{"1":"Malawi","2":"MWI","3":"Sub-Saharan Africa","4":"2019","5":"550"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"2019","5":"530"},{"1":"Sierra Leone","2":"SLE","3":"Sub-Saharan Africa","4":"2019","5":"520"},{"1":"Democratic Republic of the Congo","2":"COD","3":"Sub-Saharan Africa","4":"2019","5":"510"},{"1":"Madagascar","2":"MDG","3":"Sub-Saharan Africa","4":"2019","5":"510"},{"1":"Mozambique","2":"MOZ","3":"Sub-Saharan Africa","4":"2019","5":"490"},{"1":"Central African Republic","2":"CAF","3":"Sub-Saharan Africa","4":"2019","5":"470"},{"1":"Somalia","2":"SOM","3":"Sub-Saharan Africa","4":"2019","5":"410"},{"1":"Burundi","2":"BDI","3":"Sub-Saharan Africa","4":"2019","5":"230"},{"1":"American Samoa","2":"ASM","3":"East Asia and Pacific","4":"2019","5":"NA"},{"1":"Virgin Islands","2":"VGB","3":"Latin America and Caribbean","4":"2019","5":"NA"},{"1":"Jersey","2":"CHI","3":"Europe and Central Asia","4":"2019","5":"NA"},{"1":"Eritrea","2":"ERI","3":"Sub-Saharan Africa","4":"2019","5":"NA"},{"1":"French Polynesia","2":"PYF","3":"East Asia and Pacific","4":"2019","5":"NA"},{"1":"Greenland","2":"GRL","3":"Europe and Central Asia","4":"2019","5":"NA"},{"1":"Guam","2":"GUM","3":"East Asia and Pacific","4":"2019","5":"NA"},{"1":"North Korea","2":"PRK","3":"East Asia and Pacific","4":"2019","5":"NA"},{"1":"Liechtenstein","2":"LIE","3":"Europe and Central Asia","4":"2019","5":"NA"},{"1":"Monaco","2":"MCO","3":"Europe and Central Asia","4":"2019","5":"NA"},{"1":"New Caledonia","2":"NCL","3":"East Asia and Pacific","4":"2019","5":"NA"},{"1":"Northern Mariana Islands","2":"MNP","3":"East Asia and Pacific","4":"2019","5":"NA"},{"1":"South Sudan","2":"SSD","3":"Sub-Saharan Africa","4":"2019","5":"NA"},{"1":"Saint Martin","2":"MAF","3":"Latin America and Caribbean","4":"2019","5":"NA"},{"1":"Venezuela","2":"VEN","3":"Latin America and Caribbean","4":"2019","5":"NA"},{"1":"Yemen","2":"YEM","3":"Middle East and North Africa","4":"2019","5":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The dataset contains 212 observations (rows of data) on 5 variables (columns). An observation corresponds to an individual country. Variables are as follows:</p>
<ul>
<li><code>Country</code> is a categorical (factor) variable identifying the country.</li>
<li><code>Code</code> is a categorical (factor) variable containing the country code - a standard 3-letter identifier of a country. It contains exactly the same information as <code>Country</code>, so adds nothing further to the information in the dataset. Nonetheless, in some representations below we will be interested in identifying individual countries in graphs, and the country code may be more compact label for the country than its name.</li>
<li><code>Region</code> is a categorical (factor) variable, identifying a country’s region according to the World Bank’s standard classification of countries by regions. We will see more about that below. However, the presence of data on region adds a meaningful new dimension to the data as it allows us to represent not only features of the distribution of living standards across the world overall, but also between and within regions.</li>
<li><code>Year</code> lists the year of observation. The variable is inherited from the original panel dataset. However, it equals <code>2019</code> for all observations in the cross section. Given the lack of variation, it contains no meaningful information for the purposes of the following representations (aside from the fact that we are looking at distributions in 2019 which we already know).</li>
<li>Finally, <code>rGNIpc</code> corresponds to GNI p.c. (PPP) - our main object of interest - and is a numeric variable. It is measured in <em>2022 international dollars</em> - a counterfactual currency which is constructed as if 1 international dollar has the same purchasing power in each country (of course, imperfectly).</li>
</ul>
</div>
<div id="summary-of-key-variables" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Summary of key variables<a href="ch1.html#summary-of-key-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To get a feel of the data, let’s summarize two of the key variables<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="ch1.html#cb27-1" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">summary</span>(csdata<span class="sc">$</span>Region))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">East Asia and Pacific</td>
<td align="right">34</td>
</tr>
<tr class="even">
<td align="left">Europe and Central Asia</td>
<td align="right">57</td>
</tr>
<tr class="odd">
<td align="left">Latin America and Caribbean</td>
<td align="right">41</td>
</tr>
<tr class="even">
<td align="left">Middle East and North Africa</td>
<td align="right">21</td>
</tr>
<tr class="odd">
<td align="left">North America</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">South Asia</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Sub-Saharan Africa</td>
<td align="right">48</td>
</tr>
</tbody>
</table>
<p>When <code>summary()</code> is used with a categorical variable, it returns the number of observations in the sample for each category (that is, the complete distribution, in terms of counts, in the sample). As we can see countries are categorized into 7 regions based on World Bank’s region classification. We can see that different regions include different numbers of countries. For example, there are only three countries in North America (by inspection Bermuda, Canada and the United States). Most countries (57) are in the region of Europe and Central Asia.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="ch1.html#cb28-1" tabindex="-1"></a><span class="fu">summary</span>(csdata<span class="sc">$</span>rGNIpc)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##     230    2195    6435   15890   19693  117280      16</code></pre>
<p>When <code>summary()</code> is used with a continuous variabe, it returns a set of summary statistics for the distribution of the variable in the sample. For example</p>
<ul>
<li>we can see that GNI per capita is unevenly distributed between countries, ranging from 230 international dollars per year to 117280 international dollars per year.</li>
<li>The mean (or average) GNI per capita in the sample is 15890 international dollars. Recall, that the sample mean equals the sum of all countries’ GNI per capita divided by the number of countries.</li>
<li>The median GNI per capita in the sample is 6435. Recall that the sample median equals the GNI per capita in the country such that half of the countries in the sample have lower, and half have higher GNI per capita.</li>
<li>It can be seen that the average GNI per capita in the sample - 15890 - is well above the median - 6435. While both the mean and the median are measures of central tendency, it is important to know that in many cases it is not unambiguous how to think of the centre of a distribution, and different measures emphasise different notions of what “typical” value is.</li>
<li>We see that the 25th percentile and 75th percentile of GNI per capita in the sample are 2195 and 19693 international dollars respectively. 25% of countries have GNI per capita of 2195 international dollars or less; 75% of countries have GNI per capita of 19693 dollars or less.</li>
<li>One common measure of the spread or dispersion of a variable, called the <em>interquartile range</em> (IQR) is defined as the difference between the 75th and 25th percentile. Given the results we can see that the IQR for GNI per capita in the sample is 17498 (= 19693 - 2195) international dollars.</li>
<li>Data is not available (recorded as having value <code>NA</code>) for 16 out of the 212 countries .</li>
</ul>
</div>
<div id="maps-for-fun" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Maps (for fun)<a href="ch1.html#maps-for-fun" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Given that the unit of observation is a country, a (possibly) attractive way of visualizing cross-country differences, is through a map.</p>
<p>The code below downloads an open-access geographic dataset of country coordinates which we can merge with our current data and produce a map. While the code is short , what happens under the hood is conceptually complex so we will make no attempt to explain the code. If you are interested in learning how to produce maps like this yourself, you can take a look at the discussion on the <a href="https://cran.r-project.org/web/packages/maps/index.html"><code>maps</code> package website</a>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="ch1.html#cb30-1" tabindex="-1"></a><span class="co"># Load world map data from server</span></span>
<span id="cb30-2"><a href="ch1.html#cb30-2" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">&quot;world&quot;</span>)</span>
<span id="cb30-3"><a href="ch1.html#cb30-3" tabindex="-1"></a></span>
<span id="cb30-4"><a href="ch1.html#cb30-4" tabindex="-1"></a><span class="co"># Merge world map data with GNI data; the function inner_join() takes two dataframes and &quot;merges&quot; them (adding variables from both together) at position specified by a common variable in the two. In this case &quot;region&quot; in `world` identifies country with same country names as the variable &quot;Country&quot; in `csdata`. The resulting data includes both coordinates for plotting the countries (from `world`) and data on GNI p.c. (from `csdata`).</span></span>
<span id="cb30-5"><a href="ch1.html#cb30-5" tabindex="-1"></a></span>
<span id="cb30-6"><a href="ch1.html#cb30-6" tabindex="-1"></a>gnimap.data <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(world, csdata, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;region&quot;</span><span class="ot">=</span><span class="st">&quot;Country&quot;</span>))</span>
<span id="cb30-7"><a href="ch1.html#cb30-7" tabindex="-1"></a></span>
<span id="cb30-8"><a href="ch1.html#cb30-8" tabindex="-1"></a><span class="co"># Set a simple map theme</span></span>
<span id="cb30-9"><a href="ch1.html#cb30-9" tabindex="-1"></a></span>
<span id="cb30-10"><a href="ch1.html#cb30-10" tabindex="-1"></a>plainmap <span class="ot">&lt;-</span> <span class="fu">theme</span>(</span>
<span id="cb30-11"><a href="ch1.html#cb30-11" tabindex="-1"></a>  <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-12"><a href="ch1.html#cb30-12" tabindex="-1"></a>  <span class="at">axis.line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-13"><a href="ch1.html#cb30-13" tabindex="-1"></a>  <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-14"><a href="ch1.html#cb30-14" tabindex="-1"></a>  <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-15"><a href="ch1.html#cb30-15" tabindex="-1"></a>  <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-16"><a href="ch1.html#cb30-16" tabindex="-1"></a>  <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-17"><a href="ch1.html#cb30-17" tabindex="-1"></a>  <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb30-18"><a href="ch1.html#cb30-18" tabindex="-1"></a>  <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)</span>
<span id="cb30-19"><a href="ch1.html#cb30-19" tabindex="-1"></a>)</span></code></pre></div>
<p>Once we have allocated the merged data into a new dataframe, <code>gnimap.data</code>, containing information on both geography and GNI per capita, we can plot a map as follows:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="ch1.html#cb31-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> gnimap.data, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span> </span>
<span id="cb31-2"><a href="ch1.html#cb31-2" tabindex="-1"></a>  <span class="fu">coord_fixed</span>(<span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb31-3"><a href="ch1.html#cb31-3" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> rGNIpc)) <span class="sc">+</span></span>
<span id="cb31-4"><a href="ch1.html#cb31-4" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span><span class="st">&quot;Blues&quot;</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">name=</span><span class="st">&quot;international $&quot;</span>) <span class="sc">+</span> </span>
<span id="cb31-5"><a href="ch1.html#cb31-5" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;GNI per capita, PPP (2019)&quot;</span>) <span class="sc">+</span> plainmap</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Notice that the colour (shade of blue) of each country corresponds to its GNI p.c. (PPP) as noted in the legend. While a map is an informative way to represent the geographic variation in GNI per capita, there are many aspects of the distribution which are not so easy to observe and would be better visualized later on.</p>
<p>For the purposes of understanding our data, we next plot a map showing how the regions in our data (as categorised by the World Bank) are defined:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="ch1.html#cb32-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> gnimap.data, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span> </span>
<span id="cb32-2"><a href="ch1.html#cb32-2" tabindex="-1"></a>  <span class="fu">coord_fixed</span>(<span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb32-3"><a href="ch1.html#cb32-3" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Region)) <span class="sc">+</span></span>
<span id="cb32-4"><a href="ch1.html#cb32-4" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Regions by World Bank classification&quot;</span>) <span class="sc">+</span> plainmap </span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>This is all we are going to say about maps at this stage. Before proceeding further, we remove objects that will no longer be needed from the R environment:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="ch1.html#cb33-1" tabindex="-1"></a><span class="co"># Clean up</span></span>
<span id="cb33-2"><a href="ch1.html#cb33-2" tabindex="-1"></a></span>
<span id="cb33-3"><a href="ch1.html#cb33-3" tabindex="-1"></a><span class="fu">rm</span>(gnimap.data, plainmap, world,longdata)</span></code></pre></div>
<p>Also, for the purpose of some of the representations later it would be useful to remove the 16 observations with missing values of GNI per capita (discussed above) from the dataset:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="ch1.html#cb34-1" tabindex="-1"></a>csdata <span class="ot">&lt;-</span> <span class="fu">subset</span>(csdata, <span class="sc">!</span><span class="fu">is.na</span>(rGNIpc))</span></code></pre></div>
<p>Note that this leaves us with a sample of 196 countries from the initial 212.</p>
</div>
<div id="histograms" class="section level3 hasAnchor" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Histograms<a href="ch1.html#histograms" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A histogram of a random variable is a graph which divides the support of the variable, plotted on the horizontal axis, into a number of equally wide “bins”, with the height of each bin (on the vertical axis) equal to the number (or fraction) of observations falling into the bin. The histogram is a graphical representation of the distribution function of the variable.</p>
<p>Using <code>ggplot2</code>, we can produce a histogram of the distribution of GNI per capita across countries as follows</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="ch1.html#cb35-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">x=</span>rGNIpc)) <span class="sc">+</span> </span>
<span id="cb35-2"><a href="ch1.html#cb35-2" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">60</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">fill=</span><span class="st">&quot;red&quot;</span>, <span class="at">alpha=</span><span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb35-3"><a href="ch1.html#cb35-3" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;GNI per capita, PPP (2019)&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Number of countries&quot;</span>) <span class="sc">+</span></span>
<span id="cb35-4"><a href="ch1.html#cb35-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Histogram&quot;</span>,</span>
<span id="cb35-5"><a href="ch1.html#cb35-5" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;Distribution of real GNI per capita across countries, 2019&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>As can be seen from the histogram above, living standards (as measured by PPP-adjusted GNI per capita) are very unequally distributed across countries.</p>
<ul>
<li>The distribution of GNI p.c. is highly disperse (varying from close to 0 to about 115000 international dollars).</li>
<li>In addition, the distribution is asymmetric, with much more countries in the left of the distribution, and fewer countries to the right forming a long right tail.</li>
<li>The extent of asymmetry in a distribution can be formally measured by its <em>skewness</em>. The precise definition of skewness as a measure is beyond the scope of this text but skewness has negative value if the tail of the distribution is to the left, and positive value if the tail is to the right. The histogram suggests that GNI per capita (PPP) is strongly <em>positively skewed</em> in the sample.</li>
<li>Consistently with this positive skewness the mean GNI p.c. (at 15890) is well above the median (at 6435) as we saw in the table of summary statistics above.</li>
</ul>
</div>
<div id="quantiles" class="section level3 hasAnchor" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> Quantiles<a href="ch1.html#quantiles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While a histogram provides a rich description of the distribution of a continuous variable, other types of graphs and tables can visualize better other aspects of the differences between countries in the data.</p>
<p>A way to get a quantitative feeling of the dispersion and asymmetry of the distribution is by calculating some of its quantiles. The <span class="math inline">\(n\)</span>-th quantile of a distribution simply means the <span class="math inline">\(100\times n\)</span>th percentile. For example, the 0.1th quantile is the 10th percentile. The code below calculates the 0.1, 0.2,…,0.9th quantiles of the distribution:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="ch1.html#cb36-1" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">quantile</span>(csdata<span class="sc">$</span>rGNIpc,<span class="fu">seq</span>(<span class="fl">0.1</span>,<span class="fl">0.9</span>,<span class="fl">0.1</span>)))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">10%</td>
<td align="right">910</td>
</tr>
<tr class="even">
<td align="left">20%</td>
<td align="right">1880</td>
</tr>
<tr class="odd">
<td align="left">30%</td>
<td align="right">3270</td>
</tr>
<tr class="even">
<td align="left">40%</td>
<td align="right">4490</td>
</tr>
<tr class="odd">
<td align="left">50%</td>
<td align="right">6435</td>
</tr>
<tr class="even">
<td align="left">60%</td>
<td align="right">9510</td>
</tr>
<tr class="odd">
<td align="left">70%</td>
<td align="right">16355</td>
</tr>
<tr class="even">
<td align="left">80%</td>
<td align="right">26960</td>
</tr>
<tr class="odd">
<td align="left">90%</td>
<td align="right">47355</td>
</tr>
</tbody>
</table>
<p>We can see, for example, that</p>
<ul>
<li>10% of the countries in the dataset have GNI p.c. of no more than 910 international dollars;</li>
<li>20% of the countries in the dataset have GNI p.c. of no more than 1880 international dollars;</li>
<li>50% of the countries in the dataset have GNI p.c. of no more than 6435 international dollars (the median).</li>
</ul>
<p>By comparing different quantiles we can obtain a clear numerical sense of the differences between countries at different points of the distribution.</p>
</div>
<div id="quantile-function" class="section level3 hasAnchor" number="2.1.6">
<h3><span class="header-section-number">2.1.6</span> Quantile function<a href="ch1.html#quantile-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While the above table only reports 9 quantiles, in principle we can provide a table of more (for example, 100 quantiles - or percentiles) but so much information would be cumbersome to read in a table. Instead, we may equivalently represent such information graphically.</p>
<p>Given a random variable, e.g. GNI per capita (PPP) in 2019, its quantile function is defined as the mapping from <span class="math inline">\(n\in[0,1]\)</span> to the <span class="math inline">\(n\)</span>-th quantile of its distribution. For example, if <span class="math inline">\(q(n)\)</span> is the empirical quantile function for GNI per capita in our data, then given the observations of quantiles above, <span class="math inline">\(q(0.1) = 910\)</span>, <span class="math inline">\(q(0.2)=1880\)</span> and <span class="math inline">\(q(0.5)=6435\)</span>. Hence, the way to represent graphically all quantiles of the distribution, is by a graph of its quantile function.</p>
<p>One way to do this is as follows. First, create a new variable which records the quantile rank in the GNI p.c. distribution for each country (i.e., the quantile of GNI pc where each country is located)</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="ch1.html#cb37-1" tabindex="-1"></a><span class="co"># Create a variable rGNIpc.rank representing the quantile rank of each country in the distribution of GNI p.c.</span></span>
<span id="cb37-2"><a href="ch1.html#cb37-2" tabindex="-1"></a></span>
<span id="cb37-3"><a href="ch1.html#cb37-3" tabindex="-1"></a>csdata <span class="ot">&lt;-</span> csdata <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">rGNIpc.rank =</span> <span class="fu">rank</span>(rGNIpc)<span class="sc">/</span><span class="fu">length</span>(rGNIpc))</span>
<span id="cb37-4"><a href="ch1.html#cb37-4" tabindex="-1"></a></span>
<span id="cb37-5"><a href="ch1.html#cb37-5" tabindex="-1"></a><span class="co"># (Not essential) Sort country codes by GNI pc </span></span>
<span id="cb37-6"><a href="ch1.html#cb37-6" tabindex="-1"></a></span>
<span id="cb37-7"><a href="ch1.html#cb37-7" tabindex="-1"></a>csdata<span class="sc">$</span>Code <span class="ot">&lt;-</span> <span class="fu">fct_reorder</span>(csdata<span class="sc">$</span>Code,csdata<span class="sc">$</span>rGNIpc)</span></code></pre></div>
<p>Next, plot quantile rank of each country against its corresponding GNI per capita (PPP)</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="ch1.html#cb38-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">y=</span>rGNIpc, <span class="at">x=</span>rGNIpc.rank)) <span class="sc">+</span> </span>
<span id="cb38-2"><a href="ch1.html#cb38-2" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb38-3"><a href="ch1.html#cb38-3" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Quantile rank&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;International dollars&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Empirical quantile function&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;GNI per capita (PPP), 2019&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>While above we used <code>geom_line()</code> to fit a curve passing through the coordinates of each country. We can make this explicit by instead using points for each country. Doing so, and customizing the graph a bit further yields the following</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="ch1.html#cb39-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">y=</span>rGNIpc, <span class="at">x=</span>rGNIpc.rank)) <span class="sc">+</span> </span>
<span id="cb39-2"><a href="ch1.html#cb39-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col=</span><span class="st">&quot;tomato&quot;</span>) <span class="sc">+</span></span>
<span id="cb39-3"><a href="ch1.html#cb39-3" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span>rGNIpc.rank, <span class="at">xend=</span>rGNIpc.rank, <span class="at">y=</span><span class="dv">0</span>, <span class="at">yend=</span>rGNIpc), <span class="at">col=</span><span class="st">&quot;tomato&quot;</span>) <span class="sc">+</span></span>
<span id="cb39-4"><a href="ch1.html#cb39-4" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>Code), <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">angle=</span><span class="dv">90</span>, <span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb39-5"><a href="ch1.html#cb39-5" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Quantile rank&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;International dollars&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Empirical quantile function&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;GNI per capita (PPP), 2019&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>Relative to a histogram, this representation draws more attention to “divergence” of living standards across countries (for example, we can easily see how rich are the richest relative to the poorest).</p>
<p>For example, one interesting observation is as follows. Since countries are ordered by quantile rank (from poorest to richest) it is clear that the quantile function will be increasing. However, the empirical quantile function is not only increasing, but appears to exhibit approximately exponential pattern. To verify this, note that if we plotted the natural logarithm of GNI p.c. (rather than its level) on the vertical axis, we get “approximately” linear pattern:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="ch1.html#cb40-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">y=</span><span class="fu">log</span>(rGNIpc), <span class="at">x=</span>rGNIpc.rank)) <span class="sc">+</span> </span>
<span id="cb40-2"><a href="ch1.html#cb40-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col=</span><span class="st">&quot;tomato&quot;</span>) <span class="sc">+</span></span>
<span id="cb40-3"><a href="ch1.html#cb40-3" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span>rGNIpc.rank, <span class="at">xend=</span>rGNIpc.rank, <span class="at">y=</span><span class="dv">4</span>, <span class="at">yend=</span><span class="fu">log</span>(rGNIpc)), <span class="at">col=</span><span class="st">&quot;tomato&quot;</span>) <span class="sc">+</span></span>
<span id="cb40-4"><a href="ch1.html#cb40-4" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>Code), <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">angle=</span><span class="dv">90</span>, <span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb40-5"><a href="ch1.html#cb40-5" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Quantile rank&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;International dollars&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Empirical quantile function&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;GNI per capita (PPP), 2019&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>This tells us something fairly specific about the distribution (and in particular its skewness). If we order countries in ascending order of GNI p.c. (PPP), each subsequent country is richer than the previous one by approximately the same proportion (rather than for example, by the same number of international dollars). This is yet another manifestation of the skewness of the distribution, characterised by a long and thinning right tail.</p>
<p>In order to get an idea of how the distribution varies between regions, we can make the colors elements different for different regions of the world:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="ch1.html#cb41-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">y=</span>rGNIpc, <span class="at">x=</span>rGNIpc.rank, <span class="at">col=</span>Region)) <span class="sc">+</span> </span>
<span id="cb41-2"><a href="ch1.html#cb41-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb41-3"><a href="ch1.html#cb41-3" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span>rGNIpc.rank, <span class="at">xend=</span>rGNIpc.rank, <span class="at">y=</span><span class="dv">0</span>, <span class="at">yend=</span>rGNIpc)) <span class="sc">+</span></span>
<span id="cb41-4"><a href="ch1.html#cb41-4" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>Code), <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">angle=</span><span class="dv">90</span>, <span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb41-5"><a href="ch1.html#cb41-5" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Quantile rank&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;International dollars&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Empirical quantile function&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;GNI per capita (PPP), 2019&quot;</span>) <span class="sc">+</span>   <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.16</span>, <span class="fl">0.7</span>))</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>The graph shows clear regional differences. For example, there is a large concentration of countries from Sub-Saharan Africa at the lowest quantiles, and countries from North America and Europe and Central Asia in the highest quantiles.</p>
</div>
<div id="visualizing-distribution-within-and-between-regions" class="section level3 hasAnchor" number="2.1.7">
<h3><span class="header-section-number">2.1.7</span> Visualizing distribution within and between regions<a href="ch1.html#visualizing-distribution-within-and-between-regions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As already seen there seem to be systematic regional differences with respect to the distribution of GNI p.c. In what follows, we will look at ways to represent the data to understand these differences.</p>
<p>To have a clearer point of reference, let’s first reorder the levels of the <code>Region</code> variable to be in ascending order of the median (per region):</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="ch1.html#cb42-1" tabindex="-1"></a><span class="co"># Rearrange region in order of the median GNI pc.</span></span>
<span id="cb42-2"><a href="ch1.html#cb42-2" tabindex="-1"></a>csdata<span class="sc">$</span>Region <span class="ot">&lt;-</span> <span class="fu">fct_reorder</span>(csdata<span class="sc">$</span>Region,csdata<span class="sc">$</span>rGNIpc, <span class="at">.fun =</span> median)</span></code></pre></div>
<div id="histograms-by-region" class="section level4 hasAnchor" number="2.1.7.1">
<h4><span class="header-section-number">2.1.7.1</span> Histograms by region<a href="ch1.html#histograms-by-region" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Just like we can plot a histogram for the whole dataset, we can also plot separate histograms for regions:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="ch1.html#cb43-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">x=</span>rGNIpc, <span class="at">fill=</span>Region)) <span class="sc">+</span> </span>
<span id="cb43-2"><a href="ch1.html#cb43-2" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">10</span>,<span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span><span class="fl">0.9</span>)<span class="sc">+</span></span>
<span id="cb43-3"><a href="ch1.html#cb43-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Histograms&quot;</span>,</span>
<span id="cb43-4"><a href="ch1.html#cb43-4" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;Distribution of GNI per capita within regions, 2019&quot;</span>) <span class="sc">+</span></span>
<span id="cb43-5"><a href="ch1.html#cb43-5" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;GNI per capita, PPP (2019)&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Number of countries&quot;</span>) <span class="sc">+</span></span>
<span id="cb43-6"><a href="ch1.html#cb43-6" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(Region<span class="sc">~</span>., <span class="at">scales=</span><span class="st">&quot;free_y&quot;</span>, <span class="at">strip.position =</span> <span class="st">&quot;bottom&quot;</span>)<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>Note that all histograms have the same horizontal axis, but different scales on the vertical axes (this is achieved by <code>scales="free_y"</code>).</p>
<p>A few things coming out of the graph:</p>
<ul>
<li>Countries in Sub-Saharan Africa and South Asia tend to have low GNI p.c. relative to other regions.</li>
<li>The three countries in North America - Bermuda, Canada and US have high GNI p.c.</li>
<li>There dispersion across all regions, but the distribution Sub-Saharan Africa and South Asia appears fairly compressed in the histograms, indicating low dispersion relative to other regions.</li>
</ul>
</div>
<div id="dot-plots-by-region" class="section level4 hasAnchor" number="2.1.7.2">
<h4><span class="header-section-number">2.1.7.2</span> Dot plots by region<a href="ch1.html#dot-plots-by-region" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Given the relatively small number of observations, an alternative way to represent the same information is through dot plots. Suppose that we measure GNI p.c. on the horizontal axis, draw a separate vertical intercept for each region and plot each country as a point:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="ch1.html#cb44-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">x=</span>Region, <span class="at">y=</span>rGNIpc)) <span class="sc">+</span> </span>
<span id="cb44-2"><a href="ch1.html#cb44-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col=</span>Region), <span class="at">show.legend=</span>F) <span class="sc">+</span></span>
<span id="cb44-3"><a href="ch1.html#cb44-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Dot plot&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;GNI per capita grouped by regions, 2019&quot;</span>) <span class="sc">+</span> </span>
<span id="cb44-4"><a href="ch1.html#cb44-4" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;International $&quot;</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-21-1.png" width="672" />
Unlike the histogram, we are not able to clearly see the density of the distribution for different ranges of GNI p.c. (as ranges with many countries contain too many points to differentiate between). For example, while we have 48 countries in Sub-Saharan Africa, most of them are far in the left tail of the distribution, and from the graph it appears as if there are fewer countries. Typically, this type of graph is more useful when we have a small number of observations. Nonetheless, it is still somewhat insightful in the context of our data with 196 observations. One advantage is that GNI p.c. is a continuous variable, and small variations are visible on the dot plot, but not on the histogram (which approximates the continuous distribution through a discrete one).</p>
</div>
<div id="summary-statistics-by-region" class="section level4 hasAnchor" number="2.1.7.3">
<h4><span class="header-section-number">2.1.7.3</span> Summary statistics by region<a href="ch1.html#summary-statistics-by-region" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>While histograms and dot plots provide rich representation of the distributions of GNI p.c. within and between regions, they contain too much information, which makes it difficult to gain a more quantitative feel of the regional differences (for example, it is not always easy to compare distributions between regions - given the histogram above are countries in Sub-Saharan Africa typically poorer or richer than in South Asia?). We can gain more quantitative feeling of regional differences by using summary statistics (numbers that summarize key aspects of the distributions such as central tendency and spread) by region. For example, we can obtain the median and mean (measures of central tendency) and standard deviation (measuring the “spread”) of the distributions of GNI p.c. for the different regions (i.e., <em>conditional on region</em>):</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="ch1.html#cb45-1" tabindex="-1"></a>csdata <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">median=</span><span class="fu">median</span>(rGNIpc), <span class="at">mean=</span><span class="fu">mean</span>(rGNIpc), <span class="at">sd=</span><span class="fu">sd</span>(rGNIpc))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Region"],"name":[1],"type":["fct"],"align":["left"]},{"label":["median"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Sub-Saharan Africa","2":"1225","3":"2344.13","4":"3117.059"},{"1":"South Asia","2":"2145","3":"3140.00","4":"3056.581"},{"1":"East Asia and Pacific","2":"4680","3":"13772.50","4":"17225.044"},{"1":"Middle East and North Africa","2":"7060","3":"16808.50","4":"17882.461"},{"1":"Latin America and Caribbean","2":"9070","3":"13463.42","4":"12000.976"},{"1":"Europe and Central Asia","2":"19200","3":"28641.32","4":"25212.081"},{"1":"North America","2":"66130","3":"76670.00","4":"36499.785"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The numbers should be fairly self-explanatory but in any case we can see that there are large differences in living standards across regions. In addition, we can see that distributions are more disperse the richer the region on average.</p>
</div>
<div id="bar-charts-by-region" class="section level4 hasAnchor" number="2.1.7.4">
<h4><span class="header-section-number">2.1.7.4</span> Bar charts by region<a href="ch1.html#bar-charts-by-region" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>One way to graphically represent key summary statistics (such as the information from the above table) is through bar charts. For example, a bar chart representing the median GNI p.c. by regions can be obtained as follows:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="ch1.html#cb46-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">y=</span>rGNIpc, <span class="at">x=</span>Region)) <span class="sc">+</span> </span>
<span id="cb46-2"><a href="ch1.html#cb46-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&#39;summary&#39;</span>, <span class="at">fun=</span><span class="st">&#39;median&#39;</span>, <span class="fu">aes</span>(<span class="at">fill=</span>Region), <span class="at">show.legend=</span>F) <span class="sc">+</span>   </span>
<span id="cb46-3"><a href="ch1.html#cb46-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Bar chart&quot;</span>,<span class="at">subtitle=</span><span class="st">&quot;Median GNI per capita (PPP), 2019&quot;</span>) <span class="sc">+</span> </span>
<span id="cb46-4"><a href="ch1.html#cb46-4" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;International $&quot;</span>) <span class="sc">+</span></span>
<span id="cb46-5"><a href="ch1.html#cb46-5" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-23-1.png" width="672" />
We can produce similar bar charts for the other summary statistics.</p>
</div>
<div id="box-plots-by-region" class="section level4 hasAnchor" number="2.1.7.5">
<h4><span class="header-section-number">2.1.7.5</span> Box plots by region<a href="ch1.html#box-plots-by-region" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A somewhat richer representation of regional differences, based on summary statistics, can be obtained by using <em>box and whisker plots</em> (also called simply <em>box plots</em>). A box plot of GNI p.c. by regions in our data can be obtained as follows:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="ch1.html#cb47-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">x=</span>Region, <span class="at">y=</span>rGNIpc)) <span class="sc">+</span> </span>
<span id="cb47-2"><a href="ch1.html#cb47-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill=</span>Region), <span class="at">show.legend=</span>F) <span class="sc">+</span></span>
<span id="cb47-3"><a href="ch1.html#cb47-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Box plot&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;GNI per capita (PPP), 2019&quot;</span>) <span class="sc">+</span> </span>
<span id="cb47-4"><a href="ch1.html#cb47-4" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Region&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;International $&quot;</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-24-1.png" width="672" />
The vertical segments in the middle of the “boxes” correspond to the medians of the distributions by region. The boxes span the support from the 25th percentile to the 75th percentile (so 50% of the observations per region lie inside the corresponding box, and the width of the box is the IQR). The horizontal segments - referred to as <em>whiskers</em> - around the sides of the boxes are meant to represent parts of the support where observations are “relatively common”. Precise statement of what this means is beyond the scope of the discussion here, but by default R plots whiskers as having length equal to <span class="math inline">\(1.5\times IQR\)</span> or going up(down) to the maximum(minimum) observation in the sample. The points, represent individual observations (countries) lying outside of the whiskers, i.e., ones with “unusually” extreme values - these are referred to as <em>outliers</em>.</p>
<p>Unlike the bar chart, the box plot allows us to understand not only the central tendency of the conditional-on-region distributions, but also the dispersion, and skewness.</p>
</div>
<div id="categorizing-countries-by-quintiles" class="section level4 hasAnchor" number="2.1.7.6">
<h4><span class="header-section-number">2.1.7.6</span> Categorizing countries by quintiles<a href="ch1.html#categorizing-countries-by-quintiles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Another meaningful set of representations can be obtained by categorizing countries into groups according to their ranking in the distribution of GNI p.c. While this certainly leads to some loss of information, it may still be appropriate for representing features of the data that are difficult to achieve with continuous variables, as discussed below.</p>
<p>First, let’s create a new variable <code>qrank.rGNIpc</code> which assigns countries into a <em>quintile</em><a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> of the global GNI p.c. distribution:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="ch1.html#cb48-1" tabindex="-1"></a>csdata <span class="ot">&lt;-</span> csdata <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(rGNIpc)</span>
<span id="cb48-2"><a href="ch1.html#cb48-2" tabindex="-1"></a>csdata <span class="ot">&lt;-</span> csdata <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">qrank.rGNIpc=</span><span class="fu">ntile</span>(rGNIpc,<span class="dv">5</span>))</span>
<span id="cb48-3"><a href="ch1.html#cb48-3" tabindex="-1"></a>csdata<span class="sc">$</span>qrank.rGNIpc <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(csdata<span class="sc">$</span>qrank.rGNIpc)</span>
<span id="cb48-4"><a href="ch1.html#cb48-4" tabindex="-1"></a><span class="fu">levels</span>(csdata<span class="sc">$</span>qrank.rGNIpc) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;0-20%&quot;</span>, <span class="st">&quot;20-40%&quot;</span>, <span class="st">&quot;40-60%&quot;</span>, <span class="st">&quot;60-80%&quot;</span>, <span class="st">&quot;80-100%&quot;</span>)</span></code></pre></div>
<p>Now we can characterize the joint distribution of region and GNI p.c. quintile in the form of a two-way table of counts:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="ch1.html#cb49-1" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">table</span>(csdata<span class="sc">$</span>Region, csdata<span class="sc">$</span>qrank.rGNIpc)</span>
<span id="cb49-2"><a href="ch1.html#cb49-2" tabindex="-1"></a><span class="fu">kable</span>(tab)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">0-20%</th>
<th align="right">20-40%</th>
<th align="right">40-60%</th>
<th align="right">60-80%</th>
<th align="right">80-100%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Sub-Saharan Africa</td>
<td align="right">30</td>
<td align="right">9</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">South Asia</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">East Asia and Pacific</td>
<td align="right">2</td>
<td align="right">12</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">Middle East and North Africa</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">Latin America and Caribbean</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">15</td>
<td align="right">14</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">Europe and Central Asia</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">13</td>
<td align="right">14</td>
<td align="right">21</td>
</tr>
<tr class="odd">
<td align="left">North America</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>To understand the meaning of the numbers, a few examples follow</p>
<ul>
<li>30 of the countries in our data are in Sub-Saharan Africa and in the bottom quintile of the global GNI p.c. distribution.</li>
<li>4 of the countries in the data are in East Asia and Pacific region and are in the third quintile of the global GNI p.c. distribution.</li>
</ul>
<p>The same information can be represented in terms of proportions:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="ch1.html#cb50-1" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">prop.table</span>(tab), <span class="at">digits=</span><span class="dv">2</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">0-20%</th>
<th align="right">20-40%</th>
<th align="right">40-60%</th>
<th align="right">60-80%</th>
<th align="right">80-100%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Sub-Saharan Africa</td>
<td align="right">0.15</td>
<td align="right">0.05</td>
<td align="right">0.03</td>
<td align="right">0.01</td>
<td align="right">0.00</td>
</tr>
<tr class="even">
<td align="left">South Asia</td>
<td align="right">0.02</td>
<td align="right">0.02</td>
<td align="right">0.00</td>
<td align="right">0.01</td>
<td align="right">0.00</td>
</tr>
<tr class="odd">
<td align="left">East Asia and Pacific</td>
<td align="right">0.01</td>
<td align="right">0.06</td>
<td align="right">0.02</td>
<td align="right">0.02</td>
<td align="right">0.03</td>
</tr>
<tr class="even">
<td align="left">Middle East and North Africa</td>
<td align="right">0.01</td>
<td align="right">0.04</td>
<td align="right">0.01</td>
<td align="right">0.02</td>
<td align="right">0.03</td>
</tr>
<tr class="odd">
<td align="left">Latin America and Caribbean</td>
<td align="right">0.01</td>
<td align="right">0.02</td>
<td align="right">0.08</td>
<td align="right">0.07</td>
<td align="right">0.02</td>
</tr>
<tr class="even">
<td align="left">Europe and Central Asia</td>
<td align="right">0.01</td>
<td align="right">0.02</td>
<td align="right">0.07</td>
<td align="right">0.07</td>
<td align="right">0.11</td>
</tr>
<tr class="odd">
<td align="left">North America</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.02</td>
</tr>
</tbody>
</table>
<p>So, for example,</p>
<ul>
<li>15% of the countries in our data are in Sub-Saharan Africa and in the bottom quintile of the global GNI p.c. distribution.</li>
<li>2% of the countries in the data are in East Asia and Pacific region and are in the third quintile of the global GNI p.c. distribution.</li>
</ul>
<p>If we normalize the values in the table so that rows sum to 1, we get a table on the distribution of GNI p.c. quintiles <em>conditional on regions</em>:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="ch1.html#cb51-1" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">prop.table</span>(tab,<span class="dv">1</span>), <span class="at">digits=</span><span class="dv">2</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">0-20%</th>
<th align="right">20-40%</th>
<th align="right">40-60%</th>
<th align="right">60-80%</th>
<th align="right">80-100%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Sub-Saharan Africa</td>
<td align="right">0.65</td>
<td align="right">0.20</td>
<td align="right">0.11</td>
<td align="right">0.04</td>
<td align="right">0.00</td>
</tr>
<tr class="even">
<td align="left">South Asia</td>
<td align="right">0.38</td>
<td align="right">0.50</td>
<td align="right">0.00</td>
<td align="right">0.12</td>
<td align="right">0.00</td>
</tr>
<tr class="odd">
<td align="left">East Asia and Pacific</td>
<td align="right">0.07</td>
<td align="right">0.43</td>
<td align="right">0.14</td>
<td align="right">0.14</td>
<td align="right">0.21</td>
</tr>
<tr class="even">
<td align="left">Middle East and North Africa</td>
<td align="right">0.05</td>
<td align="right">0.40</td>
<td align="right">0.10</td>
<td align="right">0.20</td>
<td align="right">0.25</td>
</tr>
<tr class="odd">
<td align="left">Latin America and Caribbean</td>
<td align="right">0.05</td>
<td align="right">0.08</td>
<td align="right">0.39</td>
<td align="right">0.37</td>
<td align="right">0.11</td>
</tr>
<tr class="even">
<td align="left">Europe and Central Asia</td>
<td align="right">0.04</td>
<td align="right">0.06</td>
<td align="right">0.25</td>
<td align="right">0.26</td>
<td align="right">0.40</td>
</tr>
<tr class="odd">
<td align="left">North America</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
</tr>
</tbody>
</table>
<p>So for example, 65% of countries in Sub-Saharan Africa are in the bottom fifth of the global GNI p.c. distribution; additional 20% are in the second quintile, etc. On the other hand, 100% of countries in North America region are in the top fifth of the global GNI p.c. distribution.</p>
<p>If instead we normalize the values in the table so that columns sum to 1, we get a table on the distribution of regions <em>conditional on quintile of GNI p.c.</em>:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="ch1.html#cb52-1" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">prop.table</span>(tab,<span class="dv">2</span>))</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="38%" />
<col width="8%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">0-20%</th>
<th align="right">20-40%</th>
<th align="right">40-60%</th>
<th align="right">60-80%</th>
<th align="right">80-100%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Sub-Saharan Africa</td>
<td align="right">0.750</td>
<td align="right">0.2307692</td>
<td align="right">0.1282051</td>
<td align="right">0.0512821</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">South Asia</td>
<td align="right">0.075</td>
<td align="right">0.1025641</td>
<td align="right">0.0000000</td>
<td align="right">0.0256410</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">East Asia and Pacific</td>
<td align="right">0.050</td>
<td align="right">0.3076923</td>
<td align="right">0.1025641</td>
<td align="right">0.1025641</td>
<td align="right">0.1538462</td>
</tr>
<tr class="even">
<td align="left">Middle East and North Africa</td>
<td align="right">0.025</td>
<td align="right">0.2051282</td>
<td align="right">0.0512821</td>
<td align="right">0.1025641</td>
<td align="right">0.1282051</td>
</tr>
<tr class="odd">
<td align="left">Latin America and Caribbean</td>
<td align="right">0.050</td>
<td align="right">0.0769231</td>
<td align="right">0.3846154</td>
<td align="right">0.3589744</td>
<td align="right">0.1025641</td>
</tr>
<tr class="even">
<td align="left">Europe and Central Asia</td>
<td align="right">0.050</td>
<td align="right">0.0769231</td>
<td align="right">0.3333333</td>
<td align="right">0.3589744</td>
<td align="right">0.5384615</td>
</tr>
<tr class="odd">
<td align="left">North America</td>
<td align="right">0.000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
<td align="right">0.0769231</td>
</tr>
</tbody>
</table>
<p>So for example, 75% of world’s poorest countries (i.e., countries in the bottom 20 percent) are in Sub-Saharan Africa. On the other hand, 8% of the world’s richest countries (in terms of quintile of global distribution) are in North America.</p>
<p>The information from the two-way tables can be equivalently represented in bar charts. For example, the distribution of GNI p.c. quintiles by region (i.e., conditional on regions) can be represented as follows:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="ch1.html#cb53-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">x=</span>Region, <span class="at">fill=</span>qrank.rGNIpc)) <span class="sc">+</span> </span>
<span id="cb53-2"><a href="ch1.html#cb53-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&#39;dodge&#39;</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb53-3"><a href="ch1.html#cb53-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Bar chart&quot;</span>,<span class="at">subtitle=</span><span class="st">&quot;Distribution of countries across GNI quintiles by region, 2019&quot;</span>) <span class="sc">+</span> </span>
<span id="cb53-4"><a href="ch1.html#cb53-4" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;GNI per capita (PPP) Quintile&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Number of countries&quot;</span>) </span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<p>The distribution of regions across GNI p.c. quintiles can be represented as follows:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="ch1.html#cb54-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata, <span class="fu">aes</span>(<span class="at">fill=</span>Region, <span class="at">x=</span>qrank.rGNIpc), <span class="at">na.rm =</span> T) <span class="sc">+</span> </span>
<span id="cb54-2"><a href="ch1.html#cb54-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&#39;dodge&#39;</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb54-3"><a href="ch1.html#cb54-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Bar chart&quot;</span>,<span class="at">subtitle=</span><span class="st">&quot;Distribution of countries across regions by GNI quintile, 2019&quot;</span>) <span class="sc">+</span> </span>
<span id="cb54-4"><a href="ch1.html#cb54-4" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;GNI per capita (PPP) Quintile&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Number of countries&quot;</span>) </span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>Following this let’s clean the R environment</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="ch1.html#cb55-1" tabindex="-1"></a><span class="fu">rm</span>(csdata, tab)</span></code></pre></div>
</div>
</div>
<div id="representing-relationships-between-continuous-variables" class="section level3 hasAnchor" number="2.1.8">
<h3><span class="header-section-number">2.1.8</span> Representing relationships between continuous variables<a href="ch1.html#representing-relationships-between-continuous-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the data we use so far the only continuous variable is GNI per capita (PPP). However, we typically work with richer datasets and are often interested in representing the relationship between several continuous variables.</p>
<p>To provide some examples of this, we load the dataset from sheet <code>sc2019_multi</code> in the <code>data_ch1.xlsx</code> Excel file:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="ch1.html#cb56-1" tabindex="-1"></a>csdata.all <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data_ch1.xlsx&quot;</span>, <span class="at">sheet=</span><span class="st">&quot;cs2019_multi&quot;</span>)</span>
<span id="cb56-2"><a href="ch1.html#cb56-2" tabindex="-1"></a><span class="fu">head</span>(csdata.all)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Code"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Region"],"name":[4],"type":["chr"],"align":["left"]},{"label":["rGNIpc"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["LifeExpectancy"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["CO2pc"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"AFG","3":"2019","4":"South Asia","5":"530","6":"63.565","7":"0.2975637"},{"1":"Albania","2":"ALB","3":"2019","4":"Europe and Central Asia","5":"5230","6":"79.282","7":"1.7494625"},{"1":"Algeria","2":"DZA","3":"2019","4":"Middle East and North Africa","5":"4050","6":"76.474","7":"3.9944018"},{"1":"American Samoa","2":"ASM","3":"2019","4":"East Asia and Pacific","5":"NA","6":"NA","7":"NA"},{"1":"Andorra","2":"AND","3":"2019","4":"Europe and Central Asia","5":"46530","6":"NA","7":"6.2872038"},{"1":"Angola","2":"AGO","3":"2019","4":"Sub-Saharan Africa","5":"2040","6":"62.448","7":"0.7536382"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The new dataframe contains the same cross section of countries in 2019, but in addition to GNI per capita (PPP), includes two additional variables from the World Bank’s WMD database for 2019:</p>
<ul>
<li><code>LifeExpectancy</code>: the average life expectancy at birth for each country</li>
<li><code>CO2pc</code>: the CO2 emissions per capita for each country.</li>
</ul>
<div id="gni-per-capita-and-life-expenctancy" class="section level4 hasAnchor" number="2.1.8.1">
<h4><span class="header-section-number">2.1.8.1</span> GNI per capita and Life Expenctancy<a href="ch1.html#gni-per-capita-and-life-expenctancy" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s start by investigating how GNI per capita associates with life expectancy. A convenient way for representing the relationship between two continuous variables is through a scatterplot. In this case this can be a graph with GNI p.c. on the horizontal axis and life expectancy on the vertical axis, with each country’s combination of the two variables plotted by a point at the corresponding coordinates:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="ch1.html#cb57-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata.all,<span class="fu">aes</span>(<span class="at">x=</span>rGNIpc, <span class="at">y=</span>LifeExpectancy)) <span class="sc">+</span></span>
<span id="cb57-2"><a href="ch1.html#cb57-2" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<p>As we can see, there is a clear positive relationship between GNI per capita and life expectancy.</p>
<p>Given the scale of measurement on both axes, the relationship appears to be non-linear. In such cases it is worth checking how changes in the scale of measurement affect the shape of the relationship. To explore this, let’s plot the natural log of GNI per capita (PPP) against the natural log of life expectancy:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="ch1.html#cb58-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata.all,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log</span>(rGNIpc), <span class="at">y=</span><span class="fu">log</span>(LifeExpectancy))) <span class="sc">+</span></span>
<span id="cb58-2"><a href="ch1.html#cb58-2" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<p>As we can see, on logarithmic scales, the relationship appears approximately linear. This indicates that proportional increases in GNI per capita associate with proportional increases in life expectancy.</p>
<p>Using the usual syntax we can customize the graph further:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="ch1.html#cb59-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata.all,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log</span>(rGNIpc), <span class="at">y=</span><span class="fu">log</span>(LifeExpectancy))) <span class="sc">+</span></span>
<span id="cb59-2"><a href="ch1.html#cb59-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;log(GNI per capita, PPP)&quot;</span>) <span class="sc">+</span></span>
<span id="cb59-3"><a href="ch1.html#cb59-3" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;log(Life Expectancy)&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Scatterplot&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;GNI per capita and life expecancy, 2019&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<p>Alternatively, rather than plotting points at the corresponding coordinates, we can instead plot as text the name of the country:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="ch1.html#cb60-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata.all,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log</span>(rGNIpc), <span class="at">y=</span><span class="fu">log</span>(LifeExpectancy),<span class="at">label=</span>Country)) <span class="sc">+</span></span>
<span id="cb60-2"><a href="ch1.html#cb60-2" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">check_overlap=</span><span class="cn">TRUE</span>, <span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;log(GNI per capita, PPP)&quot;</span>) <span class="sc">+</span></span>
<span id="cb60-3"><a href="ch1.html#cb60-3" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;log(Life Expectancy)&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Scatterplot&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;GNI per capita and life expecancy, 2019&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<!-- We can quantify the association by calculating the correlation coefficients between the two pairs of variables -->
<!-- - in natural units of measurement -->
<!-- ```{r} -->
<!-- cor(csdata.all$rGNIpc, csdata.all$LifeExpectancy,use="complete.obs") -->
<!-- ``` -->
<!-- - in logs -->
<!-- ```{r} -->
<!-- cor(log(csdata.all$rGNIpc), log(csdata.all$LifeExpectancy),use="complete.obs") -->
<!-- ``` -->
<!-- In both cases we have high correlations, but especially in terms of log-levels.  -->
<p>In summary, we observe that countries with higher GNI per capita tend to also have higher life expectancy. It should be noted, however, that association does not imply causal links. Based on what we observe, we are not able to conclude if higher GNI per capita causes higher life expectancy, or high life expectancy causes high GNI per capita, or if something else varies systematically over countries causing some to have high income and high life expectancy, while others to have low income and low life expectancy.</p>
</div>
<div id="gni-per-capita-and-co2-emissions-per-capita" class="section level4 hasAnchor" number="2.1.8.2">
<h4><span class="header-section-number">2.1.8.2</span> GNI per capita and CO2 emissions per capita<a href="ch1.html#gni-per-capita-and-co2-emissions-per-capita" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In a similar way we can visualize the association between GNI per capita (PPP) and CO2 emissions per capita:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="ch1.html#cb61-1" tabindex="-1"></a><span class="fu">ggplot</span>(csdata.all,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log</span>(rGNIpc), <span class="at">y=</span><span class="fu">log</span>(CO2pc), <span class="at">label=</span>Country)) <span class="sc">+</span></span>
<span id="cb61-2"><a href="ch1.html#cb61-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col=</span><span class="st">&quot;tomato2&quot;</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;log(GNI per capita)&quot;</span>) <span class="sc">+</span></span>
<span id="cb61-3"><a href="ch1.html#cb61-3" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;log(CO2 emissions per capita)&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Scatterplot&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;GNI per capita and CO2 emissions&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<!-- ```{r} -->
<!-- cor(log(csdata.all$rGNIpc), log(csdata.all$CO2pc),use="complete.obs") -->
<!-- ``` -->
<p>The association between the two seems to be even more pronounced. Again we can conclude that countries with high GNI per capita (PPP) tend to also have high CO2 emissions per capita.</p>
<p>This completes the discussion of cross-sectional data. Next we will turn attention to visualizing time series. Before that let’s clean the R environment</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="ch1.html#cb62-1" tabindex="-1"></a><span class="fu">rm</span>(csdata.all)</span></code></pre></div>
</div>
</div>
</div>
<div id="representing-time-series-data-real-gdp-per-capita-in-uk-over-time" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Representing time-series data: Real GDP per capita in UK over time<a href="ch1.html#representing-time-series-data-real-gdp-per-capita-in-uk-over-time" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section provides examples of representing time-series data.</p>
<p>Up until now we have used data on GNI per capita (PPP) from the World Bank’s World Development Indicators database. The cross-sectional dataset for 2019 that was used in the previous section, was obtained as from the full panel dataset by only keeping observations for 2019. Similarly, one way in which we can obtain a time-series dataset, is as a subset of the full panel dataset for an individual country only.</p>
<p>While this is certainly feasible (and all the below codes can be replicated by using such a dataset) we will choose to use a slightly different dataset instead - namely, a quarterly time-series of UK’s real GDP per capita (rather than annual GNI per capita (PPP)) obtained from the Office for National Statistics <a href="https://www.ons.gov.uk/economy/grossdomesticproductgdp/timeseries/ihxw/pn2">here</a>. We do so for several reasons:</p>
<ul>
<li>Atlas-method PPP-adjusted gross national income per capita is best-suited for comparing living standards between countries, but not so well-suited for understanding the dynamic change of real income within a country. Real GDP per capita is better suited for the latter.</li>
<li>GNI per capita data from the World Bank’s WDI is only available annually. Data on real GDP per capita for UK is available at higher frequencies - in partiular, we will use quarterly data - which allows for better understanding of business cyclical fluctuations.</li>
</ul>
<p>The data from ONS has been saved in the <code>uk_gdppc_qr</code> sheet of the <code>data_ch1.xlsx</code> Excel file. Start by loading the data and printing the first few rows:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="ch1.html#cb63-1" tabindex="-1"></a>ukgdp <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data_ch1.xlsx&quot;</span>, <span class="at">sheet=</span><span class="st">&quot;uk_gdppc_qr&quot;</span>)</span>
<span id="cb63-2"><a href="ch1.html#cb63-2" tabindex="-1"></a>ukgdp<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(ukgdp<span class="sc">$</span>date)</span>
<span id="cb63-3"><a href="ch1.html#cb63-3" tabindex="-1"></a></span>
<span id="cb63-4"><a href="ch1.html#cb63-4" tabindex="-1"></a><span class="fu">head</span>(ukgdp)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["date"],"name":[1],"type":["date"],"align":["right"]},{"label":["gdppc"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"1955-01-01","2":"2543"},{"1":"1955-04-01","2":"2542"},{"1":"1955-07-01","2":"2589"},{"1":"1955-10-01","2":"2573"},{"1":"1956-01-01","2":"2601"},{"1":"1956-04-01","2":"2592"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The dataset includes quarterly observations on real GDP per capita from the begining of 1955 until the begining of 2023. There are only two variables: <code>date</code> which lists the quarter of the observation, and <code>gdppc</code> which gives the value of real GDP per capita measured in 2022 pounds.</p>
<div id="time-series-line-plots" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Time-series line plots<a href="ch1.html#time-series-line-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A common way to represent the behaviour of a time-series variable is through a time-series line plot. This is a graph that plots the value of the variable (in our case real GDP per capita) against time</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="ch1.html#cb64-1" tabindex="-1"></a><span class="fu">ggplot</span>(ukgdp, <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>gdppc)) <span class="sc">+</span></span>
<span id="cb64-2"><a href="ch1.html#cb64-2" tabindex="-1"></a>  <span class="fu">geom_line</span>() </span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<p>As usual the graph can be customized. The code below sets a different color and width of the line and adds labels and titles.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="ch1.html#cb65-1" tabindex="-1"></a><span class="fu">ggplot</span>(ukgdp, <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>gdppc)) <span class="sc">+</span></span>
<span id="cb65-2"><a href="ch1.html#cb65-2" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb65-3"><a href="ch1.html#cb65-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Time-series line plot&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Real GDP per capita, quarterly, UK&quot;</span>) <span class="sc">+</span></span>
<span id="cb65-4"><a href="ch1.html#cb65-4" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;2022 £s&quot;</span>) </span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<p>Over time real GDP per capita has exhibited an overall positive trend. In terms of 2022 GBP (henceforth £), UK’s average quarterly income has more than tripled from £2543 in the first quarter of 1955 to £8213 in the first quarter of 2023. We can also see that this overall growth has not been smooth - GDP fluctuates around trend over sequential periods of <em>expansions</em> and <em>recessions</em> - something known as the <strong>business cycle</strong>. For example, in the second quarter of 2020 (the through of the 2020 pandemic recession), per capita GDP fell to £6437 - a level last seen in 1998 - from a peak of £8386 two quarters ago.</p>
</div>
<div id="time-series-line-plots-of-the-log-transformation" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Time-series line plots of the log transformation<a href="ch1.html#time-series-line-plots-of-the-log-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When representing the time path of a growing series over time it is often insightful to plot on a logarithmic scale (i.e., to plot the natural log of the series, rather than the series itself, against time). To see why this is the case, suppose that <span class="math inline">\(Y_t\)</span> denotes GDP per capita, <span class="math inline">\(Y\)</span>, at quarter <span class="math inline">\(t\)</span>. When we plot <span class="math inline">\(Y_t\)</span> against <span class="math inline">\(t\)</span>, the slope of the “curve” at any particular point is</p>
<p><span class="math display">\[\frac{\Delta Y_t}{\Delta t}\equiv\frac{Y_{t+1}-Y_t}{(t+1)-t} = Y_{t+1}-Y_t = \Delta Y_t\]</span></p>
<p>which is measured in the same units of measurement as the <span class="math inline">\(Y_t\)</span> (i.e., pounds per quarter). Hence, if GDP were to grow at a constant positive growth rate over time, its time path would describe an increasing and convex schedule over time.</p>
<p>Suppose that instead we plot the natural logarithm of GDP per capita against time. The slope of this curve at any particular point is instead</p>
<p><span class="math display">\[\frac{\Delta log(Y_t)}{\Delta t}=log(Y_{t+1})-log(Y_t)=log\left(\frac{Y_{t+1}}{Y_t}\right)=log\left(1+\frac{Y_{t+1}-Y_t}{Y_t}\right)\]</span></p>
<p>Now using the approximation <span class="math inline">\(log(1+g)\approx g\)</span> when <span class="math inline">\(g\)</span> is close to zero<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> we obtain
<span class="math display">\[\frac{\Delta log(Y_t)}{\Delta t}\approx \frac{Y_{t+1}-Y_t}{Y_t}\]</span></p>
<p>so the slope of <span class="math inline">\(log(Y_t)\)</span> in the <span class="math inline">\((t,Y_t)\)</span> plane is approximately equal to the growth rate of <span class="math inline">\(Y_t\)</span>. In the context of our data this equals the quarterly growth rate (percentage change quarter-on-quarter) of GDP. Hence, if GDP were to grow at a constant positive growth rate over time, the time path of its natural logarithm would describe a linear schedule over time. This allows us to quickly spot if there are systematic changes in growth rates over periods of time.</p>
<p>For example, plotting the log of UK’s GDP per capita over time</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="ch1.html#cb66-1" tabindex="-1"></a><span class="fu">ggplot</span>(ukgdp, <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span><span class="fu">log</span>(gdppc))) <span class="sc">+</span></span>
<span id="cb66-2"><a href="ch1.html#cb66-2" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">col=</span><span class="st">&quot;red&quot;</span> ,<span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb66-3"><a href="ch1.html#cb66-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Time-series line plot&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Real GDP per capita, quarterly, UK&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-4"><a href="ch1.html#cb66-4" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;log(2022 £s)&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p>We observe that the time path described by the log of real GDP per capita is “approximately” linear from 1955 to 2007, but afterwards shifts to a lower and flatter linear path. This indicates that real GDP growth rates were “approximately constant” from 1955 until the onset of the Great Recession in 2007, but afterwards average growth rates declined. This slowdown of GDP growth rates is one of the manifestations of a phenomenon known as <em>UK’s productivity slowdown</em> (although similar patterns have been observed in many other economies for the same time period).</p>
<p>One naive but possibly insightful way to visualize this slowdown is to imagine that after 2007 GDP per capita experienced the same growth rate as it did in the prior decades, and to compare the actual series to a <em>counterfactual</em> series for real GDP per capita that would have prevailed under the previous growth rates. To do this</p>
<ul>
<li>first, find the <em>counterfactual</em> constant average quarterly growth rate from 1955 to 2007<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></li>
</ul>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="ch1.html#cb67-1" tabindex="-1"></a>avegr.preGR<span class="ot">&lt;-</span>(ukgdp<span class="sc">$</span>gdppc[ukgdp<span class="sc">$</span>date<span class="sc">==</span><span class="st">&quot;2007-01-01&quot;</span>]<span class="sc">/</span>ukgdp<span class="sc">$</span>gdppc[ukgdp<span class="sc">$</span>date<span class="sc">==</span><span class="st">&quot;1955-01-01&quot;</span>])<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span>((<span class="dv">2007-1955</span>)<span class="sc">*</span><span class="dv">4</span>))<span class="sc">-</span><span class="dv">1</span></span></code></pre></div>
<ul>
<li>next, construct a new variable <code>cfgdppc</code> which equals to the actual value of GDP per capita in the first quarter of 1955, and then increases by the amount of the average growth rate identified above each subsequent quarter. One (inefficient but transparent) way to do this is using a loop:</li>
</ul>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="ch1.html#cb68-1" tabindex="-1"></a>ukgdp<span class="sc">$</span>cfgdppc <span class="ot">&lt;-</span> ukgdp<span class="sc">$</span>gdppc[ukgdp<span class="sc">$</span>date<span class="sc">==</span><span class="st">&quot;1955-01-01&quot;</span>]</span>
<span id="cb68-2"><a href="ch1.html#cb68-2" tabindex="-1"></a></span>
<span id="cb68-3"><a href="ch1.html#cb68-3" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(ukgdp<span class="sc">$</span>date)){</span>
<span id="cb68-4"><a href="ch1.html#cb68-4" tabindex="-1"></a>  ukgdp<span class="sc">$</span>cfgdppc[i]<span class="ot">=</span>ukgdp<span class="sc">$</span>cfgdppc[<span class="dv">1</span>]<span class="sc">*</span>(<span class="dv">1</span><span class="sc">+</span>avegr.preGR)<span class="sc">^</span>(i<span class="dv">-1</span>)</span>
<span id="cb68-5"><a href="ch1.html#cb68-5" tabindex="-1"></a>}</span></code></pre></div>
<ul>
<li>finally, plot both the natural logs of the actual and counterfactual GDP per capita series against time:</li>
</ul>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="ch1.html#cb69-1" tabindex="-1"></a><span class="fu">ggplot</span>(ukgdp) <span class="sc">+</span></span>
<span id="cb69-2"><a href="ch1.html#cb69-2" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span><span class="fu">log</span>(gdppc), <span class="at">linetype=</span><span class="st">&quot;Actual&quot;</span>),<span class="at">size=</span><span class="dv">1</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb69-3"><a href="ch1.html#cb69-3" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span><span class="fu">log</span>(cfgdppc), <span class="at">linetype=</span><span class="st">&quot;Pre-2007 trend&quot;</span>), <span class="at">alpha=</span><span class="fl">0.4</span>, <span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb69-4"><a href="ch1.html#cb69-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Time-series line plot&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Real GDP per capita, quarterly, UK&quot;</span>) <span class="sc">+</span></span>
<span id="cb69-5"><a href="ch1.html#cb69-5" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;log(2022 £s)&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">linetype=</span><span class="st">&quot;&quot;</span>) </span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-46-1.png" width="672" />
noting that (by construction) the log of the counterfactual series evolves linearly over time;</p>
<ul>
<li>or alternatively, in levels:</li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="ch1.html#cb70-1" tabindex="-1"></a><span class="fu">ggplot</span>(ukgdp) <span class="sc">+</span></span>
<span id="cb70-2"><a href="ch1.html#cb70-2" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>gdppc, <span class="at">linetype=</span><span class="st">&quot;Actual&quot;</span>), <span class="at">size=</span><span class="dv">1</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb70-3"><a href="ch1.html#cb70-3" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>cfgdppc, <span class="at">linetype=</span><span class="st">&quot;Pre-2007 trend&quot;</span>), <span class="at">alpha=</span><span class="fl">0.4</span>, <span class="at">size=</span><span class="dv">1</span>, <span class="at">col=</span><span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb70-4"><a href="ch1.html#cb70-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Time-series line plot&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Real GDP per capita, quarterly, UK&quot;</span>) <span class="sc">+</span></span>
<span id="cb70-5"><a href="ch1.html#cb70-5" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;2022 £s&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">linetype=</span><span class="st">&quot;&quot;</span>) </span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-47-1.png" width="672" /></p>
<p>noting that (by construction) the counterfactual series evolves as a geometric series over time;</p>
<p>As we can see the actual series tracks closely the counterfactual one prior to 2007 (indicating approximately constant growth rates over the period) but then diverges sharply from it during the Great Recession and furthermore continues growing at a slower average rate than before.</p>
<p>One aspect in which time series charts in logs represent information more intuitively than in levels comes from the property, previously discussed, that the difference of the logs of two numbers is approximately equal to the proportional difference between the numbers in levels. More specifically, given two numbers, <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span></p>
<p><span class="math display">\[\log(A)-\log(B)=\log\left(\frac{A}{B}\right)=\log\left(\frac{A-B}{B}+1\right)\approx\frac{A-B}{B}\]</span></p>
<p>One implication of this is that, on a plot in logs, the vertical distance between subsequent observations is approximately equal to the growth rate. We have already mentioned this, and will return to it later. Another example of how this can be useful can be stated in the context of the above example. As we can see, following the divergence between the actual and counterfactual series around the Great Recession, as of the last quarter of 2019 (just before the Covid pandemic) the difference in logs of the two series was about 0.2<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>. This implies that, up to an approximation, UK economy was operating at about 20% lower GDP per capita in 2019 relative to what we would have expected if the pre-Great-Recession trend had persisted. This is one (possibly naive) way to think of the long-term cost of the productivity slowdown. The point here is that this is clearly visible on the chart in logs without further calculations necessary. On the other hand, what we see in the chart in levels is that the level is approximately 1800 pounds less than the trend. While both numbers are informative, the point is that different representations (even of the same variable) make it easier to focus on different aspects.</p>
<p>It should be noted that this exercise should be viewed with some skepticism (for a number of reasons but especially) due to the relatively naive way of fitting a trend. This being said there is no uncontroversial way of estimating trends. Furthermore, much more general and sophisticated empirical and theoretical approaches detect a systematic decline in productivity growth in the last decades. Understanding the reasons for the productivity growth decline is a hot topic of debate in economics, and you will learn about this during your studies, but further discussion is beyond the scope of this book.</p>
</div>
<div id="recessions" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Recessions<a href="ch1.html#recessions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As already discussed GDP per capita fluctuates systematically over the business cycle - in some periods it is above trend and in others below trend. In a general sense, periods of significant decline below trend are referred to as recessions. While precise technical definitions of a recession vary across countries, in the UK recessions are technically defined as a period of at least two consecutive quarters of negative GDP growth. When plotting macroeconomic time-series it is common to explicitly visualize periods defined as recessions, and we show how to do this here.</p>
<p>First, the sheet <code>recs</code> of the <code>data_ch1.xlsx</code> Excel file contains data on all recessions in UK from 1955 to 2023 according to the technical definition.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="ch1.html#cb71-1" tabindex="-1"></a>recs <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data_ch1.xlsx&quot;</span>, <span class="at">sheet=</span><span class="st">&quot;recs&quot;</span>)</span>
<span id="cb71-2"><a href="ch1.html#cb71-2" tabindex="-1"></a>recs<span class="sc">$</span>rec_st <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(recs<span class="sc">$</span>rec_st)</span>
<span id="cb71-3"><a href="ch1.html#cb71-3" tabindex="-1"></a>recs<span class="sc">$</span>rec_en <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(recs<span class="sc">$</span>rec_en)</span>
<span id="cb71-4"><a href="ch1.html#cb71-4" tabindex="-1"></a></span>
<span id="cb71-5"><a href="ch1.html#cb71-5" tabindex="-1"></a>recs</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["rec_st"],"name":[1],"type":["date"],"align":["right"]},{"label":["rec_en"],"name":[2],"type":["date"],"align":["right"]}],"data":[{"1":"1956-04-01","2":"1956-10-01"},{"1":"1961-07-01","2":"1962-01-01"},{"1":"1973-07-01","2":"1974-04-01"},{"1":"1975-04-01","2":"1975-10-01"},{"1":"1980-01-01","2":"1981-04-01"},{"1":"1990-07-01","2":"1991-10-01"},{"1":"2008-04-01","2":"2009-07-01"},{"1":"2020-01-01","2":"2020-07-01"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The two variables <code>rec_st</code> and <code>rec_en</code> list the starting and ending quarter of each of the recessions.</p>
<p>Now, by plotting the log og real GDP per capita series, and adding colored rectangles between corresponding starting and ending dates of recessions we obtain the following plot:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="ch1.html#cb72-1" tabindex="-1"></a><span class="fu">ggplot</span>(ukgdp) <span class="sc">+</span></span>
<span id="cb72-2"><a href="ch1.html#cb72-2" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span><span class="fu">log</span>(gdppc)), <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb72-3"><a href="ch1.html#cb72-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Time-series line plot&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Real GDP per capita, quarterly, UK&quot;</span>) <span class="sc">+</span></span>
<span id="cb72-4"><a href="ch1.html#cb72-4" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;log(2022 £s)&quot;</span>) <span class="sc">+</span></span>
<span id="cb72-5"><a href="ch1.html#cb72-5" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data=</span>recs,<span class="fu">aes</span>(<span class="at">xmin=</span>rec_st, <span class="at">xmax=</span>rec_en, <span class="at">ymin=</span><span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax=</span><span class="sc">+</span><span class="cn">Inf</span>), <span class="at">fill=</span><span class="st">&#39;tomato&#39;</span>, <span class="at">alpha=</span><span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<p>As we can see, there have been 8 recessions over the period. Two of the most notable ones are the two most recent - the Great Recession of 2007-2009 and the Covid-19 recession. We can also see that while the Covid-19 recession was associated with the largest quarterly decline in GDP per capita, it was also the shortest among all according to the technical definition.</p>
</div>
<div id="growth-rates" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Growth rates<a href="ch1.html#growth-rates" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On many occasions one might be interested in analyzing the dynamic behaviour of the growth rate of GDP per capita, rather than its level.</p>
<p>A common way to measure GDP growth rates with quarterly data is in terms of annual percentage changes relative to a year ago<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>. Let <span class="math inline">\(Y_t\)</span> denote the value of GDP per capita in quarter <span class="math inline">\(t\)</span>. Then its annual growth rate relative to year (4 quarters) ago is defined as <span class="math display">\[\frac{Y_t-Y_{t-4}}{Y_{t-4}} \]</span></p>
<p>We can create a new variable <code>gdppc.gr</code> based on the above:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="ch1.html#cb73-1" tabindex="-1"></a>ukgdp <span class="ot">&lt;-</span> ukgdp <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">gdppc.gr =</span> (gdppc <span class="sc">-</span> <span class="fu">lag</span>(gdppc,<span class="dv">4</span>))<span class="sc">/</span><span class="fu">lag</span>(gdppc,<span class="dv">4</span>))</span></code></pre></div>
<p>Inspecting the data</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="ch1.html#cb74-1" tabindex="-1"></a><span class="fu">head</span>(ukgdp)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["date"],"name":[1],"type":["date"],"align":["right"]},{"label":["gdppc"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["cfgdppc"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["gdppc.gr"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"1955-01-01","2":"2543","3":"2543.000","4":"NA"},{"1":"1955-04-01","2":"2542","3":"2556.687","4":"NA"},{"1":"1955-07-01","2":"2589","3":"2570.449","4":"NA"},{"1":"1955-10-01","2":"2573","3":"2584.284","4":"NA"},{"1":"1956-01-01","2":"2601","3":"2598.194","4":"0.02280771"},{"1":"1956-04-01","2":"2592","3":"2612.178","4":"0.01966955"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>note that observations on the growth rate are missing in the first 4 quarters of the sample, as the levels from 4 quarters ago are not available.</p>
<p>Plotting growth rates against time yields the following</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="ch1.html#cb75-1" tabindex="-1"></a><span class="fu">ggplot</span>(ukgdp) <span class="sc">+</span></span>
<span id="cb75-2"><a href="ch1.html#cb75-2" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>gdppc.gr), <span class="at">col=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb75-3"><a href="ch1.html#cb75-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Time-series line plot&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Real GDP growth rate, quarterly, UK&quot;</span>) <span class="sc">+</span></span>
<span id="cb75-4"><a href="ch1.html#cb75-4" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Percentage change on year ago&quot;</span>) <span class="sc">+</span></span>
<span id="cb75-5"><a href="ch1.html#cb75-5" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data=</span>recs,<span class="fu">aes</span>(<span class="at">xmin=</span>rec_st, <span class="at">xmax=</span>rec_en, <span class="at">ymin=</span><span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax=</span><span class="sc">+</span><span class="cn">Inf</span>), <span class="at">fill=</span><span class="st">&#39;blue&#39;</span>, <span class="at">alpha=</span><span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
<p>While this plot is effectively based on the same information as as the plots of the level of GDP per capita above (in the sense that data on levels can be easily transformed into data on percentage changes and vice versa), given the scale of measurement it draws attention different aspects of the series. For example, now we can readily see that in the second quarter of the Covid-19 recession, quarterly GDP per capita had dropped by more than 20 percent relative to a year ago.</p>
<p>The size of the quarterly fluctuations surrounding the Covid-19 recessions makes it somewhat difficult to visualize what is happening prior to it. If we replicate the same graph only until the last quarter of 2019</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="ch1.html#cb76-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">subset</span>(ukgdp,date<span class="sc">&lt;</span><span class="st">&quot;2020-01-01&quot;</span>)) <span class="sc">+</span></span>
<span id="cb76-2"><a href="ch1.html#cb76-2" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>gdppc.gr), <span class="at">col=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-3"><a href="ch1.html#cb76-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Time-series line plot&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Real GDP growth rate, quarterly, UK&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-4"><a href="ch1.html#cb76-4" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Percentage change on year ago&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-5"><a href="ch1.html#cb76-5" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data=</span>recs[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,],<span class="fu">aes</span>(<span class="at">xmin=</span>rec_st, <span class="at">xmax=</span>rec_en, <span class="at">ymin=</span><span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax=</span><span class="sc">+</span><span class="cn">Inf</span>), <span class="at">fill=</span><span class="st">&#39;blue&#39;</span>, <span class="at">alpha=</span><span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
<p>we can observe more clearly the dynamics of growth rates from 1955 to 2020.</p>
<p>One thing that we can see (perhaps not very clearly) is that while there is no clear monotonic trend (as for GDP per capita in levels) typical growth rates after year 2000 tend to be lower than before - this is again the productivity slowdown discussed above.</p>
<p>Another thing we can observe is that in some sense growth rates after the 1990s tend to exhibit smaller volatility relative to before. While the Great Recession is a notable exception, it can be noticed that even in periods of expansion, fluctuations were more volatile before some time in the 1990s. This empirical observation is often referred to as the Great Moderation (although, traditionally this term has been used to describe the period from 1990s to the Great Recession, but as we can see volatility has been relatively low in the next decade as well).</p>
<p>As a side note, recall that the earlier section explained that differences in logs can be used to approximate growth rates. To investigate how good this approximation is in the context of the current discussion, we can compare a series of actual growth rates to a series of approximate growth rates constructed as difference in logs. First, construct growth rates relative to same quarter a year ago and allocate in a new variable <code>gdppc.gr.logs</code>:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="ch1.html#cb77-1" tabindex="-1"></a>ukgdp <span class="ot">&lt;-</span> ukgdp <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">gdppc.gr.logs =</span> <span class="fu">log</span>(gdppc) <span class="sc">-</span> <span class="fu">lag</span>(<span class="fu">log</span>(gdppc),<span class="dv">4</span>))</span></code></pre></div>
<p>Then plot both the actual and approximate series of growth rates against time</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="ch1.html#cb78-1" tabindex="-1"></a><span class="fu">ggplot</span>(ukgdp) <span class="sc">+</span></span>
<span id="cb78-2"><a href="ch1.html#cb78-2" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>gdppc.gr, <span class="at">col=</span><span class="st">&quot;Actual&quot;</span>), <span class="at">lty=</span><span class="st">&quot;solid&quot;</span>) <span class="sc">+</span></span>
<span id="cb78-3"><a href="ch1.html#cb78-3" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>gdppc.gr.logs, <span class="at">col=</span><span class="st">&quot;Log Approximation&quot;</span>), <span class="at">lty=</span><span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb78-4"><a href="ch1.html#cb78-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Time-series line plot&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Real GDP growth rate, quarterly, UK, actual and log approximation&quot;</span>, <span class="at">color=</span><span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb78-5"><a href="ch1.html#cb78-5" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Percentage change on year ago&quot;</span>)  <span class="sc">+</span></span>
<span id="cb78-6"><a href="ch1.html#cb78-6" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data=</span>recs,<span class="fu">aes</span>(<span class="at">xmin=</span>rec_st, <span class="at">xmax=</span>rec_en, <span class="at">ymin=</span><span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax=</span><span class="sc">+</span><span class="cn">Inf</span>), <span class="at">fill=</span><span class="st">&#39;grey&#39;</span>, <span class="at">alpha=</span><span class="fl">0.2</span>) <span class="sc">+</span> <span class="fu">scale_color_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
<p>It can be clearly seen that the two series are virtually indistinguishable on the graph for most of the time window. The only clearly visible difference seems to occur in the Covid recession where the two series seem slightly different in the quarters of largest drop and recovery, but even this is barely noticeable. Given that the quality of the approximation depends on the actual growth rate being small in absolute value, it is not surprising that the approximation performs worse exactly at times of extreme changes - however, even there it seems quite close to the actual. Therefore, given the typical range of GDP growth rates it is very common to approximate growth rates by a difference in logs (and in some contexts this is also useful for analytical reasons, but this is beyond the scope of the current discussion).</p>
</div>
<div id="distributions-again" class="section level3 hasAnchor" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> Distributions again<a href="ch1.html#distributions-again" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While this may be obvious, it is worth noting that meaningful representations of time series do not need to involve plotting series over time. In fact, depending on the context any of the tools we have seen in representing cross-sectional data might be useful for illustrating relevant features of time series data.</p>
<p>For example, it is clear that while we can plot a histogram of UK’s quarterly GDP per capita time series, this will be a meaningless (you can try yourself and reflect on what you see). However, a histogram of the GDP per capita growth rates time series is actually informative:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="ch1.html#cb79-1" tabindex="-1"></a><span class="fu">ggplot</span>(ukgdp, <span class="fu">aes</span>(<span class="at">x=</span>gdppc.gr)) <span class="sc">+</span></span>
<span id="cb79-2"><a href="ch1.html#cb79-2" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">col=</span><span class="st">&quot;black&quot;</span>, <span class="at">fill=</span><span class="st">&quot;red&quot;</span>, <span class="at">binwidth=</span><span class="fl">0.01</span>)<span class="sc">+</span></span>
<span id="cb79-3"><a href="ch1.html#cb79-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Histogram&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Distribution of growth rates&quot;</span>) <span class="sc">+</span></span>
<span id="cb79-4"><a href="ch1.html#cb79-4" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of quarters&quot;</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;Percentage change on year ago&quot;</span>) </span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<p>We can see that during the sample period, annual growth rates of around 1%-2% are most common, growth rates slightwly above or below this are relatively common, larger deviations are increasingly uncommon. It can also be noted that the two most extreme observations (which by inspection occur at the onset and recovery from the Covid-19 recession) appear as extreme outliers based on what one might have expected before.</p>
<p>As another example, recall that we have already observed a slowdown of growth over time, as well as a decrease in volatility of fluctuations over time. One way to explore this in terms of summary statistics is by plotting box plots for growth rates by decade. The code below creates a variable for decade and plots box plots for the decades from 1960s to 2010s (while we observe some data from 1950s and 2020s we have smaller number of observations than in the other decades - including some very extreme, such as the Covid pandemic, that can drive sample averages - so we omit them)</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="ch1.html#cb80-1" tabindex="-1"></a>ukgdp<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">format</span>(ukgdp<span class="sc">$</span>date, <span class="at">format=</span><span class="st">&quot;%Y&quot;</span>))</span>
<span id="cb80-2"><a href="ch1.html#cb80-2" tabindex="-1"></a>ukgdp <span class="ot">&lt;-</span> ukgdp <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">floor</span>(year <span class="sc">/</span> <span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span>)</span>
<span id="cb80-3"><a href="ch1.html#cb80-3" tabindex="-1"></a>ukgdp<span class="sc">$</span>decade <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(ukgdp<span class="sc">$</span>decade)</span>
<span id="cb80-4"><a href="ch1.html#cb80-4" tabindex="-1"></a><span class="fu">levels</span>(ukgdp<span class="sc">$</span>decade) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1950s&quot;</span>, <span class="st">&quot;1960s&quot;</span>, <span class="st">&quot;1970s&quot;</span>, <span class="st">&quot;1980s&quot;</span>, <span class="st">&quot;1990s&quot;</span>, <span class="st">&quot;2000s&quot;</span>, <span class="st">&quot;2010s&quot;</span>, <span class="st">&quot;2020s&quot;</span>)</span>
<span id="cb80-5"><a href="ch1.html#cb80-5" tabindex="-1"></a></span>
<span id="cb80-6"><a href="ch1.html#cb80-6" tabindex="-1"></a>ukgdp.trunc <span class="ot">&lt;-</span> <span class="fu">subset</span>(ukgdp,year<span class="sc">&lt;</span><span class="dv">2020</span><span class="sc">&amp;</span>year<span class="sc">&gt;</span><span class="dv">1959</span>)</span>
<span id="cb80-7"><a href="ch1.html#cb80-7" tabindex="-1"></a></span>
<span id="cb80-8"><a href="ch1.html#cb80-8" tabindex="-1"></a><span class="fu">ggplot</span>(ukgdp.trunc, <span class="fu">aes</span>(<span class="at">x=</span>decade)) <span class="sc">+</span></span>
<span id="cb80-9"><a href="ch1.html#cb80-9" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>gdppc.gr, <span class="at">col=</span>decade)) <span class="sc">+</span></span>
<span id="cb80-10"><a href="ch1.html#cb80-10" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb80-11"><a href="ch1.html#cb80-11" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept=</span><span class="fu">mean</span>(gdppc.gr, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">col=</span><span class="st">&quot;Average&quot;</span>), <span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>, <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb80-12"><a href="ch1.html#cb80-12" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Box plot&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Distribution of growth rates by decade&quot;</span>) <span class="sc">+</span></span>
<span id="cb80-13"><a href="ch1.html#cb80-13" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Decade&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Percentage change on year ago&quot;</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;False&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
<p>As we can see, indeed it appears that the distributions of growth rates have shifted leftwards over time (slowdown) and became increasingly less spread out (moderation).</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="ch1.html#cb81-1" tabindex="-1"></a><span class="fu">rm</span>(ukgdp,ukgdp.decade, avegr.preGR, i, ukgdp.trunc, recs)</span></code></pre></div>
</div>
</div>
<div id="representing-panel-data-cross-country-differences-in-living-standards-over-time---convergence-and-divergence" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Representing panel data: Cross-country differences in living standards over time - convergence and divergence<a href="ch1.html#representing-panel-data-cross-country-differences-in-living-standards-over-time---convergence-and-divergence" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The last section of the chapter uses the full panel dataset to provide examples of representations that use both cross-sectional and time variation.</p>
<p>First, load the full panel dataset in long form and prepare for analysis:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="ch1.html#cb82-1" tabindex="-1"></a>longdata <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data_ch1.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;gnipcppp_long&quot;</span>)</span>
<span id="cb82-2"><a href="ch1.html#cb82-2" tabindex="-1"></a></span>
<span id="cb82-3"><a href="ch1.html#cb82-3" tabindex="-1"></a>longdata<span class="sc">$</span>Code <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(longdata<span class="sc">$</span>Code)</span>
<span id="cb82-4"><a href="ch1.html#cb82-4" tabindex="-1"></a>longdata<span class="sc">$</span>Region <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(longdata<span class="sc">$</span>Region)</span>
<span id="cb82-5"><a href="ch1.html#cb82-5" tabindex="-1"></a>longdata<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(longdata<span class="sc">$</span>Country)</span></code></pre></div>
<p>The first few rows of data look as follows:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="ch1.html#cb83-1" tabindex="-1"></a><span class="fu">head</span>(longdata)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Code"],"name":[2],"type":["fct"],"align":["left"]},{"label":["Region"],"name":[3],"type":["fct"],"align":["left"]},{"label":["Year"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["rGNIpc"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1973","5":"NA"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1974","5":"NA"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1975","5":"NA"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1976","5":"NA"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1977","5":"NA"},{"1":"Afghanistan","2":"AFG","3":"South Asia","4":"1978","5":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>An observation (a row of data) is now for country-year pairs. We have data on 212 countries for 50 years (1973-2022), so 10600 (=212x50) observations in total. At this stage it should be clear that panel data allows us to represent both cross-sectional variations across countries at a specific period of time (for example, from the full panel we can obtain a cross section at a specific year, as we did two sections ago) and time-series variations for a specific country (for example, by only keeping data for an individual country, resulting in a time-series data). However, in addition to simply converting our data to an individual cross-section or an individual time series, we can also represent patterns over both countries and time, which we can’t do in a simple cross-section or time-series.</p>
<p>For example, we can (informally) treat the panel as a set of individual time series for different countries and present time series plots of GNI per capita for sets of countries. The following graph presents a collection of time series for a set of large developed economies</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="ch1.html#cb84-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">subset</span>(longdata, Country <span class="sc">==</span> <span class="st">&quot;UK&quot;</span><span class="sc">|</span></span>
<span id="cb84-2"><a href="ch1.html#cb84-2" tabindex="-1"></a>         Country <span class="sc">==</span> <span class="st">&quot;USA&quot;</span><span class="sc">|</span></span>
<span id="cb84-3"><a href="ch1.html#cb84-3" tabindex="-1"></a>         Country <span class="sc">==</span> <span class="st">&quot;Germany&quot;</span><span class="sc">|</span></span>
<span id="cb84-4"><a href="ch1.html#cb84-4" tabindex="-1"></a>         Country <span class="sc">==</span> <span class="st">&quot;France&quot;</span><span class="sc">|</span></span>
<span id="cb84-5"><a href="ch1.html#cb84-5" tabindex="-1"></a>         Country <span class="sc">==</span> <span class="st">&quot;Japan&quot;</span><span class="sc">|</span></span>
<span id="cb84-6"><a href="ch1.html#cb84-6" tabindex="-1"></a>           Country <span class="sc">==</span> <span class="st">&quot;Ireland&quot;</span>)</span>
<span id="cb84-7"><a href="ch1.html#cb84-7" tabindex="-1"></a></span>
<span id="cb84-8"><a href="ch1.html#cb84-8" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">y=</span><span class="fu">log</span>(rGNIpc), <span class="at">col=</span>Country)) <span class="sc">+</span></span>
<span id="cb84-9"><a href="ch1.html#cb84-9" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth=</span><span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb84-10"><a href="ch1.html#cb84-10" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="sc">+</span> </span>
<span id="cb84-11"><a href="ch1.html#cb84-11" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;log(GNI per capita, PPP)&quot;</span>) <span class="sc">+</span></span>
<span id="cb84-12"><a href="ch1.html#cb84-12" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Time series plot&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;Evolution of GNI per capita across a set of developed economies&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
<p>We observe that from 1973 to 2022 GNI per capita (PPP) evolved in a fairly similar way. In addition, while differences (in proportional terms given the log scale) were larger in 1970s, they converged over time. This is especially strongly pronounced until around the period of the Great Recession after which some relative divergence relative to the US seems to have occurred. It seems that the productivity slowdown which we documented for UK earlier, also seems to be common across the advanced economies, and the divergence relative to the US could be down to the fact that among these US did not experience a slowdown of the same magnitude (subject to the PPP exchange rate adjustments).</p>
<p>We can also see that the series fluctuate in a fairly similar way relative to trend <a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a> indicating that business cycles in different countries tend to be somewhat synchronized. For example, all countries see declines relative to trend during the early 1980s recessions, the Great Recession, and the Covid-19 recession.</p>
<p>On the other hand, if we make a similar plot for a set of fast growing (typically Asian) economies, with the US for reference, we observe the following:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="ch1.html#cb85-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">subset</span>(longdata, Country <span class="sc">==</span> <span class="st">&quot;USA&quot;</span><span class="sc">|</span></span>
<span id="cb85-2"><a href="ch1.html#cb85-2" tabindex="-1"></a>               Country <span class="sc">==</span> <span class="st">&quot;South Korea&quot;</span><span class="sc">|</span></span>
<span id="cb85-3"><a href="ch1.html#cb85-3" tabindex="-1"></a>               Country <span class="sc">==</span> <span class="st">&quot;Singapore&quot;</span><span class="sc">|</span></span>
<span id="cb85-4"><a href="ch1.html#cb85-4" tabindex="-1"></a>               Country <span class="sc">==</span> <span class="st">&quot;China&quot;</span><span class="sc">|</span></span>
<span id="cb85-5"><a href="ch1.html#cb85-5" tabindex="-1"></a>               Country <span class="sc">==</span> <span class="st">&quot;Myanmar&quot;</span>)</span>
<span id="cb85-6"><a href="ch1.html#cb85-6" tabindex="-1"></a></span>
<span id="cb85-7"><a href="ch1.html#cb85-7" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">y=</span><span class="fu">log</span>(rGNIpc), <span class="at">col=</span>Country)) <span class="sc">+</span></span>
<span id="cb85-8"><a href="ch1.html#cb85-8" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb85-9"><a href="ch1.html#cb85-9" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="sc">+</span> </span>
<span id="cb85-10"><a href="ch1.html#cb85-10" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;log(GNI per capita, PPP)&quot;</span>) <span class="sc">+</span></span>
<span id="cb85-11"><a href="ch1.html#cb85-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Time series plot&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;Evolution of GNI per capita across a set of developping economies&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>While these countries had much lower GNI per capita in the 1970s, they experienced faster overall growth relative to advanced economies over the next decades, leading to a decline in the proportional gap in living standards.</p>
<p>At this stage it may be natural to conjecture that typically countries with lower income per capita will grow faster than those with higher income per capita, leading to convergence of living standards over time. Based on the above observations this appears sensible, and is sometimes referred to as the <em>convergence hypothesis</em>. However, we have to be careful because in its basic form the convergence hypothesis does not account for experiences of other countries. For example, a similar plot for a set of countries in Sub-Saharan Africa, yields</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="ch1.html#cb86-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">subset</span>(longdata, Country <span class="sc">==</span> <span class="st">&quot;USA&quot;</span><span class="sc">|</span></span>
<span id="cb86-2"><a href="ch1.html#cb86-2" tabindex="-1"></a>               Country <span class="sc">==</span> <span class="st">&quot;Democratic Republic of the Congo&quot;</span><span class="sc">|</span></span>
<span id="cb86-3"><a href="ch1.html#cb86-3" tabindex="-1"></a>               Country <span class="sc">==</span> <span class="st">&quot;Zimbabwe&quot;</span><span class="sc">|</span></span>
<span id="cb86-4"><a href="ch1.html#cb86-4" tabindex="-1"></a>               Country <span class="sc">==</span> <span class="st">&quot;Niger&quot;</span><span class="sc">|</span></span>
<span id="cb86-5"><a href="ch1.html#cb86-5" tabindex="-1"></a>               Country <span class="sc">==</span> <span class="st">&quot;Somalia&quot;</span>)</span>
<span id="cb86-6"><a href="ch1.html#cb86-6" tabindex="-1"></a></span>
<span id="cb86-7"><a href="ch1.html#cb86-7" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">y=</span><span class="fu">log</span>(rGNIpc), <span class="at">col=</span>Country)) <span class="sc">+</span></span>
<span id="cb86-8"><a href="ch1.html#cb86-8" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb86-9"><a href="ch1.html#cb86-9" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="sc">+</span> </span>
<span id="cb86-10"><a href="ch1.html#cb86-10" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;log(GNI per capita, PPP)&quot;</span>) <span class="sc">+</span></span>
<span id="cb86-11"><a href="ch1.html#cb86-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Time series plot&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;Evolution of GNI per capita across a set of developed economies&quot;</span>)</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
<p>While the chosen countries had much lower per capita income than US in the beginning of the period, over time living standards have not only not converged, but arguably diverged.</p>
<p>To understand the pattern of convergence/divergence further, it may be useful to examine the association between countries’ GNI per capita in 1973 and their typical growth rates over the next decades. To do so, first, let’s calculate each country’s “typical” growth rate form from 1973 to 2019 (not until 2022 to disregard the effects of the Covid-19 recession). There could be different ways to define “typical”. A sensible one is as the counterfactual constant annual growth rate that would have led to the economy growing from its level in 1973 to 2019 (see the previous section). Let <span class="math inline">\(Y_{i,t}\)</span> be country <span class="math inline">\(i\)</span>’s GNI per capita (PPP) in year <span class="math inline">\(t\)</span>. Then if <span class="math inline">\(Y_{i,t}\)</span> grew at a constant annual rate of <span class="math inline">\(g_{i}\)</span> then</p>
<p><span class="math display">\[Y_{i,2019} = Y_{i,1973}\times(1+g_{i})^{46} \Rightarrow g_{i} = \left(\frac{Y_{i,2019}}{Y_{i,1973}}\right)^{1/46}-1 \]</span></p>
<p>Construct a new varible equal to the “typical growth rate” from 1973 to 2019:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="ch1.html#cb87-1" tabindex="-1"></a>longdata<span class="ot">&lt;-</span>longdata <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">rGNIpc.gr =</span> (rGNIpc[Year<span class="sc">==</span><span class="dv">2019</span>]<span class="sc">/</span>rGNIpc[Year<span class="sc">==</span><span class="dv">1973</span>])<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">46</span>)<span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<p>Now, keep only one observation from 1973 for each country:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="ch1.html#cb88-1" tabindex="-1"></a>df<span class="ot">&lt;-</span>longdata <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Year<span class="sc">==</span><span class="dv">1973</span><span class="sc">&amp;!</span><span class="fu">is.na</span>(rGNIpc.gr))</span></code></pre></div>
<p>Note that we are left with only 97 countries, as for the others data on GNI p.c. for either 1973 or 2019 was missing.</p>
<p>The data we are using now is presented below:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="ch1.html#cb89-1" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(rGNIpc.gr)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Code"],"name":[2],"type":["fct"],"align":["left"]},{"label":["Region"],"name":[3],"type":["fct"],"align":["left"]},{"label":["Year"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["rGNIpc"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["rGNIpc.gr"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Madagascar","2":"MDG","3":"Sub-Saharan Africa","4":"1973","5":"210","6":"0.01947644"},{"1":"Sierra Leone","2":"SLE","3":"Sub-Saharan Africa","4":"1973","5":"190","6":"0.02212834"},{"1":"Zimbabwe","2":"ZWE","3":"Sub-Saharan Africa","4":"1973","5":"520","6":"0.02254361"},{"1":"Burundi","2":"BDI","3":"Sub-Saharan Africa","4":"1973","5":"80","6":"0.02322322"},{"1":"Zambia","2":"ZMB","3":"Sub-Saharan Africa","4":"1973","5":"450","6":"0.02482067"},{"1":"Somalia","2":"SOM","3":"Sub-Saharan Africa","4":"1973","5":"120","6":"0.02707003"},{"1":"Central African Republic","2":"CAF","3":"Sub-Saharan Africa","4":"1973","5":"120","6":"0.03012397"},{"1":"Niger","2":"NER","3":"Sub-Saharan Africa","4":"1973","5":"150","6":"0.03021906"},{"1":"Togo","2":"TGO","3":"Sub-Saharan Africa","4":"1973","5":"220","6":"0.03059554"},{"1":"Senegal","2":"SEN","3":"Sub-Saharan Africa","4":"1973","5":"360","6":"0.03090462"},{"1":"Chad","2":"TCD","3":"Sub-Saharan Africa","4":"1973","5":"160","6":"0.03228225"},{"1":"Guinea-Bissau","2":"GNB","3":"Sub-Saharan Africa","4":"1973","5":"160","6":"0.03503723"},{"1":"Nicaragua","2":"NIC","3":"Latin America and Caribbean","4":"1973","5":"380","6":"0.03536884"},{"1":"Mauritania","2":"MRT","3":"Sub-Saharan Africa","4":"1973","5":"350","6":"0.03611597"},{"1":"Sudan","2":"SDN","3":"Sub-Saharan Africa","4":"1973","5":"180","6":"0.03658651"},{"1":"Jamaica","2":"JAM","3":"Latin America and Caribbean","4":"1973","5":"1030","6":"0.03708839"},{"1":"South Africa","2":"ZAF","3":"Sub-Saharan Africa","4":"1973","5":"1250","6":"0.03727423"},{"1":"Gambia","2":"GMB","3":"Sub-Saharan Africa","4":"1973","5":"130","6":"0.03727681"},{"1":"Iran","2":"IRN","3":"Middle East and North Africa","4":"1973","5":"720","6":"0.03798177"},{"1":"Argentina","2":"ARG","3":"Latin America and Caribbean","4":"1973","5":"1820","6":"0.04033260"},{"1":"Republic of Congo","2":"COG","3":"Sub-Saharan Africa","4":"1973","5":"320","6":"0.04041559"},{"1":"Ivory Coast","2":"CIV","3":"Sub-Saharan Africa","4":"1973","5":"360","6":"0.04094262"},{"1":"Papua New Guinea","2":"PNG","3":"East Asia and Pacific","4":"1973","5":"390","6":"0.04130621"},{"1":"Burkina Faso","2":"BFA","3":"Sub-Saharan Africa","4":"1973","5":"110","6":"0.04261323"},{"1":"Cameroon","2":"CMR","3":"Sub-Saharan Africa","4":"1973","5":"220","6":"0.04320989"},{"1":"Algeria","2":"DZA","3":"Middle East and North Africa","4":"1973","5":"570","6":"0.04354844"},{"1":"Ghana","2":"GHA","3":"Sub-Saharan Africa","4":"1973","5":"290","6":"0.04451318"},{"1":"Honduras","2":"HND","3":"Latin America and Caribbean","4":"1973","5":"310","6":"0.04482451"},{"1":"Gabon","2":"GAB","3":"Sub-Saharan Africa","4":"1973","5":"890","6":"0.04569308"},{"1":"Tunisia","2":"TUN","3":"Middle East and North Africa","4":"1973","5":"450","6":"0.04586038"},{"1":"Fiji","2":"FJI","3":"East Asia and Pacific","4":"1973","5":"710","6":"0.04596058"},{"1":"Benin","2":"BEN","3":"Sub-Saharan Africa","4":"1973","5":"150","6":"0.04624258"},{"1":"Sweden","2":"SWE","3":"Europe and Central Asia","4":"1973","5":"7050","6":"0.04627079"},{"1":"Suriname","2":"SUR","3":"Latin America and Caribbean","4":"1973","5":"710","6":"0.04756569"},{"1":"Bahamas","2":"BHS","3":"Latin America and Caribbean","4":"1973","5":"3510","6":"0.04801220"},{"1":"Cuba","2":"CUB","3":"Latin America and Caribbean","4":"1973","5":"1030","6":"0.04804767"},{"1":"Lesotho","2":"LSO","3":"Sub-Saharan Africa","4":"1973","5":"140","6":"0.04874324"},{"1":"France","2":"FRA","3":"Europe and Central Asia","4":"1973","5":"4700","6":"0.04901101"},{"1":"USA","2":"USA","3":"North America","4":"1973","5":"7290","6":"0.04910495"},{"1":"Peru","2":"PER","3":"Latin America and Caribbean","4":"1973","5":"740","6":"0.04929853"},{"1":"Puerto Rico","2":"PRI","3":"Latin America and Caribbean","4":"1973","5":"2380","6":"0.04957577"},{"1":"Egypt","2":"EGY","3":"Middle East and North Africa","4":"1973","5":"290","6":"0.04961358"},{"1":"Kenya","2":"KEN","3":"Sub-Saharan Africa","4":"1973","5":"200","6":"0.05003806"},{"1":"Nigeria","2":"NGA","3":"Sub-Saharan Africa","4":"1973","5":"220","6":"0.05004903"},{"1":"Mexico","2":"MEX","3":"Latin America and Caribbean","4":"1973","5":"1010","6":"0.05031267"},{"1":"Belize","2":"BLZ","3":"Latin America and Caribbean","4":"1973","5":"610","6":"0.05052981"},{"1":"Morocco","2":"MAR","3":"Middle East and North Africa","4":"1973","5":"360","6":"0.05068653"},{"1":"Swaziland","2":"SWZ","3":"Sub-Saharan Africa","4":"1973","5":"360","6":"0.05158275"},{"1":"Mali","2":"MLI","3":"Sub-Saharan Africa","4":"1973","5":"80","6":"0.05189468"},{"1":"Belgium","2":"BEL","3":"Europe and Central Asia","4":"1973","5":"4690","6":"0.05191251"},{"1":"Guatemala","2":"GTM","3":"Latin America and Caribbean","4":"1973","5":"450","6":"0.05193183"},{"1":"Ecuador","2":"ECU","3":"Latin America and Caribbean","4":"1973","5":"590","6":"0.05209236"},{"1":"Netherlands","2":"NLD","3":"Europe and Central Asia","4":"1973","5":"4970","6":"0.05233380"},{"1":"Pakistan","2":"PAK","3":"South Asia","4":"1973","5":"150","6":"0.05237312"},{"1":"El Salvador","2":"SLV","3":"Latin America and Caribbean","4":"1973","5":"390","6":"0.05241792"},{"1":"Germany","2":"DEU","3":"Europe and Central Asia","4":"1973","5":"4670","6":"0.05253203"},{"1":"Italy","2":"ITA","3":"Europe and Central Asia","4":"1973","5":"3250","6":"0.05297945"},{"1":"Chile","2":"CHL","3":"Latin America and Caribbean","4":"1973","5":"1350","6":"0.05347988"},{"1":"UK","2":"GBR","3":"Europe and Central Asia","4":"1973","5":"3920","6":"0.05364844"},{"1":"Denmark","2":"DNK","3":"Europe and Central Asia","4":"1973","5":"5580","6":"0.05415841"},{"1":"Japan","2":"JPN","3":"East Asia and Pacific","4":"1973","5":"3660","6":"0.05446384"},{"1":"Rwanda","2":"RWA","3":"Sub-Saharan Africa","4":"1973","5":"70","6":"0.05467125"},{"1":"Australia","2":"AUS","3":"East Asia and Pacific","4":"1973","5":"4650","6":"0.05513236"},{"1":"Finland","2":"FIN","3":"Europe and Central Asia","4":"1973","5":"4030","6":"0.05624335"},{"1":"Brazil","2":"BRA","3":"Latin America and Caribbean","4":"1973","5":"720","6":"0.05699730"},{"1":"Philippines","2":"PHL","3":"East Asia and Pacific","4":"1973","5":"290","6":"0.05734365"},{"1":"Trinidad","2":"TTO","3":"Latin America and Caribbean","4":"1973","5":"1150","6":"0.05835184"},{"1":"Portugal","2":"PRT","3":"Europe and Central Asia","4":"1973","5":"1700","6":"0.05846076"},{"1":"Colombia","2":"COL","3":"Latin America and Caribbean","4":"1973","5":"470","6":"0.05908341"},{"1":"Panama","2":"PAN","3":"Latin America and Caribbean","4":"1973","5":"1090","6":"0.05936316"},{"1":"Austria","2":"AUT","3":"Europe and Central Asia","4":"1973","5":"3580","6":"0.05945827"},{"1":"Spain","2":"ESP","3":"Europe and Central Asia","4":"1973","5":"2090","6":"0.05989843"},{"1":"India","2":"IND","3":"South Asia","4":"1973","5":"140","6":"0.06041742"},{"1":"Luxembourg","2":"LUX","3":"Europe and Central Asia","4":"1973","5":"5200","6":"0.06048978"},{"1":"Guyana","2":"GUY","3":"Latin America and Caribbean","4":"1973","5":"430","6":"0.06081611"},{"1":"Turkey","2":"TUR","3":"Europe and Central Asia","4":"1973","5":"640","6":"0.06085322"},{"1":"Nepal","2":"NPL","3":"South Asia","4":"1973","5":"80","6":"0.06101924"},{"1":"Saudi Arabia","2":"SAU","3":"Middle East and North Africa","4":"1973","5":"1510","6":"0.06117150"},{"1":"Dominican Republic","2":"DOM","3":"Latin America and Caribbean","4":"1973","5":"520","6":"0.06119311"},{"1":"Norway","2":"NOR","3":"Europe and Central Asia","4":"1973","5":"5320","6":"0.06138597"},{"1":"Costa Rica","2":"CRI","3":"Latin America and Caribbean","4":"1973","5":"750","6":"0.06220402"},{"1":"Uruguay","2":"URY","3":"Latin America and Caribbean","4":"1973","5":"1050","6":"0.06393879"},{"1":"Botswana","2":"BWA","3":"Sub-Saharan Africa","4":"1973","5":"370","6":"0.06474573"},{"1":"Malaysia","2":"MYS","3":"East Asia and Pacific","4":"1973","5":"600","6":"0.06519072"},{"1":"Bangladesh","2":"BGD","3":"South Asia","4":"1973","5":"120","6":"0.06538012"},{"1":"Sri Lanka","2":"LKA","3":"South Asia","4":"1973","5":"210","6":"0.06740225"},{"1":"Malta","2":"MLT","3":"Middle East and North Africa","4":"1973","5":"1260","6":"0.07085085"},{"1":"Ireland","2":"IRL","3":"Europe and Central Asia","4":"1973","5":"2540","6":"0.07250766"},{"1":"Seychelles","2":"SYC","3":"Sub-Saharan Africa","4":"1973","5":"630","6":"0.07305241"},{"1":"Thailand","2":"THA","3":"East Asia and Pacific","4":"1973","5":"270","6":"0.07359540"},{"1":"Saint Vincent","2":"VCT","3":"Latin America and Caribbean","4":"1973","5":"280","6":"0.07740081"},{"1":"Singapore","2":"SGP","3":"East Asia and Pacific","4":"1973","5":"1600","6":"0.08154596"},{"1":"Indonesia","2":"IDN","3":"East Asia and Pacific","4":"1973","5":"110","6":"0.08166142"},{"1":"Oman","2":"OMN","3":"Middle East and North Africa","4":"1973","5":"340","6":"0.08986721"},{"1":"China","2":"CHN","3":"East Asia and Pacific","4":"1973","5":"160","6":"0.09478566"},{"1":"Myanmar","2":"MMR","3":"East Asia and Pacific","4":"1973","5":"20","6":"0.09499254"},{"1":"South Korea","2":"KOR","3":"East Asia and Pacific","4":"1973","5":"430","6":"0.09954694"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>While this is a cross section of countries in 1973, it includes information on the growth rate for subsequent decades, summarized in a new variable <code>rGNIpc.gr</code>, which was obtained from the full panel dataset.</p>
<p>Country differences in average annual growth rates over the period can be observed below:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="ch1.html#cb90-1" tabindex="-1"></a><span class="fu">ggplot</span>(df,<span class="fu">aes</span>(<span class="at">x=</span>rGNIpc.gr,<span class="at">y=</span><span class="fu">fct_reorder</span>(Country,rGNIpc.gr))) <span class="sc">+</span></span>
<span id="cb90-2"><a href="ch1.html#cb90-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="fu">aes</span>(<span class="at">fill=</span>Region)) <span class="sc">+</span></span>
<span id="cb90-3"><a href="ch1.html#cb90-3" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Average annual growth rate, 1973-2019&quot;</span>) <span class="sc">+</span> </span>
<span id="cb90-4"><a href="ch1.html#cb90-4" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Country&quot;</span>) <span class="sc">+</span></span>
<span id="cb90-5"><a href="ch1.html#cb90-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Bar chart&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;Countries ranked by average growth rate of GNI per capita&quot;</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">4</span>))</span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-67-1.png" width="672" /></p>
<p>We observe that there is a large concentration of countries from Sub-Saharan Africa, Middle East and North Africa, and Latin America and the Caribbean among slowest growing countries.</p>
<p>If we now plot initial GNI p.c. (in 1973) against subsequent growth rates we obtain</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="ch1.html#cb91-1" tabindex="-1"></a><span class="fu">ggplot</span>(df,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log</span>(rGNIpc),<span class="at">y=</span>(rGNIpc.gr), <span class="at">color=</span>Region)) <span class="sc">+</span></span>
<span id="cb91-2"><a href="ch1.html#cb91-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb91-3"><a href="ch1.html#cb91-3" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;log(GNI per capita, 1973)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb91-4"><a href="ch1.html#cb91-4" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Annual growth rate, 1973 - 2019&quot;</span>) <span class="sc">+</span></span>
<span id="cb91-5"><a href="ch1.html#cb91-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Scatter plot&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;Initial per capita income and subsequent growth rates&quot;</span>) </span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-68-1.png" width="672" /></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="ch1.html#cb92-1" tabindex="-1"></a><span class="co">#+ facet_wrap(Region~., scales=&quot;free&quot;)</span></span></code></pre></div>
<p>If there was systematic convergence across all countries, we would have observed that higher initial GNI per capita associates with lower subsequent growth rates. However, the graph does not seem to exhibit such pattern. In fact, if we calculate the correlation coefficient between the two variables</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="ch1.html#cb93-1" tabindex="-1"></a><span class="fu">cor</span>(<span class="fu">log</span>(df<span class="sc">$</span>rGNIpc),df<span class="sc">$</span>rGNIpc.gr)</span></code></pre></div>
<pre><code>## [1] 0.0828161</code></pre>
<p>it turns out that the association between the two are in fact positive even if small. In the sample of 97 countries we work with, countries with high GNI per capita in 1973, also tended to grow faster on average during 1973-2019. If anything, we observe divergence, rather than convergence.</p>
<p>One aspect of this is that countries from Sub-Saharan Africa, Middle East and North Africa, and Latin America and Caribbean tend to be found in the bottom left quadrant of the graph. If we were to plot excluding these three regions</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="ch1.html#cb95-1" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(df, Region<span class="sc">!=</span><span class="st">&quot;Sub-Saharan Africa&quot;</span><span class="sc">&amp;</span>Region <span class="sc">!=</span><span class="st">&quot;Middle East and North Africa&quot;</span><span class="sc">&amp;</span>Region <span class="sc">!=</span><span class="st">&quot;Latin America and Caribbean&quot;</span>)</span>
<span id="cb95-2"><a href="ch1.html#cb95-2" tabindex="-1"></a></span>
<span id="cb95-3"><a href="ch1.html#cb95-3" tabindex="-1"></a><span class="fu">ggplot</span>(df2,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log</span>(rGNIpc),<span class="at">y=</span>(rGNIpc.gr), <span class="at">color=</span>Region)) <span class="sc">+</span></span>
<span id="cb95-4"><a href="ch1.html#cb95-4" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb95-5"><a href="ch1.html#cb95-5" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;log(GNI per capita, 1973)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb95-6"><a href="ch1.html#cb95-6" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Annual growth rate, 1973 - 2019&quot;</span>) <span class="sc">+</span></span>
<span id="cb95-7"><a href="ch1.html#cb95-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Scatter plot&quot;</span>, <span class="at">subtitle=</span><span class="st">&quot;Initial per capita income and subsequent growth rates&quot;</span>) </span></code></pre></div>
<p><img src="02-Ch1_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="ch1.html#cb96-1" tabindex="-1"></a><span class="co">#+ facet_wrap(Region~., scales=&quot;free&quot;)</span></span></code></pre></div>
<p>we observe relationship that appears to be indeed negative. Calculating the correlation coefficient</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="ch1.html#cb97-1" tabindex="-1"></a><span class="fu">cor</span>(<span class="fu">log</span>(df2<span class="sc">$</span>rGNIpc),df2<span class="sc">$</span>rGNIpc.gr)</span></code></pre></div>
<pre><code>## [1] -0.54457</code></pre>
<p>confirms that the association is negative and stronger than before (in terms of the magnitude of the coefficient). Nonetheless, it is also clear that even in the final subset of the data (which was in any case obtained somewhat arbitrarily) countries of similar initial income tend to have quite different growth experiences over time.</p>
<p>Understanding the reasons for the obseved convergence between countries (and the observed lack of convergence for some) is beyond the scope of this discussion, but is something you will return to during your studies.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-wdi" class="csl-entry">
World Bank, 2023. World development indicators. https://doi.org/<a href="https://doi.org/10.57966/6rwy-0b07">https://doi.org/10.57966/6rwy-0b07</a>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p><strong>Gross National Income (GNI)</strong> is the total income earned by a country’s residents (individuals or companies) from both domestic and foreign sources over a period of time. GNI is closely related to GDP, but accounts differently for income earned domestically and abroad.</p>
<ul>
<li>For example, when a UK resident earns income from operations in both UK and France, the income earned in France is part of UK’s GNI (but not UK’s GDP) and France’s GDP (but not France’s GNI).</li>
</ul>
<p><strong>GNI per capita (GNI pc)</strong>, the average income earned by a country’s residents, is commonly used as a measure of material standard of living. However, given differences in price levels across countries, the same amount of income will have the “power” to purchase different amounts of goods and services in different countries. In order to account for this, the World Bank produces Purchasing Power Parity (PPP) adjusted measures of GNI per capita, which are more suitable for comparisons of living standard between countries.</p>
<p>In particular, in what follows we use data GNI per capita PPP-adjusted by the so called <em>Atlas method</em> - the indicator based on which the World Bank groups countries into low, middle, and high-income.<a href="ch1.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>The function <code>kable()</code> is used here to format the tables better for the book. You can obtain the same information by simply using <code>summary(csdata$Region)</code> instead of <code>ktable(summary(csdata$Region))</code>, but will be formatted slightly differently - feel free to try.<a href="ch1.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>First quintile is countries between the 0th and 20th percentile, second between 20th and 40th percentile and so forth.<a href="ch1.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>This is an instance of a first-order Taylor approximation around <span class="math inline">\(g=0\)</span>.<a href="ch1.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>Let <span class="math inline">\(Y_t\)</span> denote quarterly GDP per capita at quarter <span class="math inline">\(t\)</span>. Suppose that <span class="math inline">\(Y_t\)</span> grows at a constant growth rate of <span class="math inline">\(g\)</span> per quarter. Then <span class="math display">\[Y_{2007,Q1} = Y_{1955,Q1}(1+g)^{(2007-1955)\times 4 (= \text{number of quarters from 1955,Q1 to 2007,Q1}) } \]</span><a href="ch1.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p>In fact, looking closely at the data, the log of GDP per capita in the last quarter of 2019 was 9.03419 in the actual series and 9.231319 in the counterfactual series - the difference in logs was then about 0.197 (9.231319-9.03419). The corresponding quantities in levels were 8386 for the actual, and 10212 for the counterfactual series. The actual difference in levels was 1826 pounds (10212-8386). The actual percentage difference was 0.217 (1826/8386). You can see that the difference in logs (0.197) is close to the actual percentage difference (0.217) even though 0.217 is not so close to zero.<a href="ch1.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p>It is also possible to measure it in terms of percentage changes relative to the previous quarter - this would correspond to the quarterly growth rate, which will be on a different scale given the differing lengths of time periods. It is also possible to measure it in terms of “annualized” quarterly growth rates.<a href="ch1.html#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p>It can be noted that the observed series for the US seems to exhibit less fluctuations relative to other countries. This is largely a matter of the way GNI per capita (PPP) series are constructed to convert units of measurement to international US dollars. For this reason series for countries other than US fluctuate with exchange rate fluctuations, while the series for the US does not.<a href="ch1.html#fnref10" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="some-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ch2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["refresher-book.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
